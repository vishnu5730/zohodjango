<!-- reshna-recurringbill -->
{% extends 'app1/base.html' %}
{% block body %}
    {% load static %}

    <style>
        .hide{
			display: none;
    	}
        input:read-only {
            background-color: rgba(0,0,0,.4) !important;
            color: #fff;
        }
    </style>
    <script>
        $(':input[readonly]').css({'background-color':'rgba(0,0,0,.4)'});
    </script>

    <div class="page-content">
        <div class="card radius-15">
            <div class="card-body">
                <div class="card-title">
                    <center><h3 class="mb-0">EDIT RECURRING BILL</h3></center>
                </div>
                <hr/>
            </div>
        </div>
        <div class="card radius-15" style="background-color: #243e54;">
            <div class="card-body">
                <form action="{% url 'update_recurringbill' rbill.rbillid %}" method="post" enctype="multipart/form-data" autocomplete="off">
                    {% csrf_token %}
                     <div class="card-title">
                      <h4 class="mb-0">Vendor Details</h4>
                </div>
                <hr/>
                <!-- <form action="" method="post" enctype="multipart/form-data" autocomplete="off">
                    {% csrf_token %}
                    
                    {% if user.is_authenticated %} -->

                        
                    <div class="row">
                        <div class="col-md-4 mt-2">
                            <label for="validationCustom01">Select Vendor</label>
                            <div class="d-flex">
                                <select name="vendor_name" id="vendor_det" class="custom-select">
                                    <option>Select Vendor</option>
                                    
                                    {% for vd in vndr %}
                                    <option value="{{vd.vendorid}} {{ vd.firstname }} {{ vd.lastname }}" {% if vd.firstname == v.firstname and vd.lastname == v.lastname %}selected{% endif %}>{{ vd.title }} {{ vd.firstname }} {{ vd.lastname }}</option>
                                    {% endfor %}
                                </select>
                                <a>
                                    <button type="button" class="btn btn-outline-secondary ml-1" 
                                    data-target="#newvendor" data-toggle="modal">+</button>
                                </a>
                                <div class="valid-feedback">Looks good!</div> 
                            </div>
                            <div class="d-none mt-4" id="gst_trt_row">
                                <div class="  mt-3">
                                  <label for="gst_trt_inp">GST Treatment</label>
                                  <input type="text" class="form-control" id="gst_trt_inp" name="gst_trt_inp">
                                </div>
                              </div>
                              
                              
                        </div>
                       <div class="col-md-4 ">
                            
                            <div class="d-none" id="email_row">
                               <div class="col-form-label">
                                <label for="email_inp">Vendor Email</label>
                                  <input type="text" class="form-control" id="email_inp" name="email_inp">
                              </div>
                             
                        </div> 
                        
                        <br>
                        <div  id="gstin_row" style="display: none;" class="" >
                            <div class="col-form-label">
                                <label class="col-form-label">GSTIN</label> 
                                <input type="text" class="form-control" id="gstno" name="gstno" >
                           </div>
                          
                     </div> 
                            
                            
                           
                        
                        
                          </div>
                          <div class="col-md-4 ">

                            <div  class=" d-none "  id="addres_row" >
                               
                                    <label class="col-form-label ">Address</label>
                                    <textarea class="form-control mt-4" rows="6"  id="addres" name="billingaddress_vendor" style="background-color: #43596c;"  ></textarea>
                             
                              
                         </div> 

                           
                          </div>
                         
                        
                       </div> 
                       <div class="row">
                        <div class="col-md-3 mt-3">
                            <label for="Place of Supply" >Place of SupplyL</label>
                            <select name="sourceof_supply" id="plosur" class="form-control">
                                <option value="Andaman and Nicobar Islands" {% if rbill.source_supply == "Andaman and Nicobar Islands" %} selected {% endif %}>Andaman and Nicobar Islands</option>
                                <option value="Andhra Pradesh" {% if rbill.source_supply == "Andhra Pradesh" %} selected {% endif %}>Andhra Pradesh</option>
                                <option value="Arunachal Pradesh" {% if rbill.source_supply == "Arunachal Pradesh" %} selected {% endif %}>Arunachal Pradesh</option>
                                <option value="Assam" {% if rbill.source_supply == "Assam" %} selected {% endif %}>Assam</option>
                                <option value="Bihar" {% if rbill.source_supply == "Bihar" %} selected {% endif %}>Bihar</option>
                                <option value="Chandigarh" {% if rbill.source_supply == "Chandigarh" %} selected {% endif %}>Chandigarh</option>
                                <option value="Chhattisgarh" {% if rbill.source_supply == "Chhattisgarh" %} selected {% endif %}>Chhattisgarh</option>
                                <option value="Dadra and Nagar Haveli" {% if rbill.source_supply == "Dadra and Nagar Haveli" %} selected {% endif %}>Dadra and Nagar Haveli</option>
                                <option value="Daman and Diu" {% if rbill.source_supply == "Daman and Diu" %} selected {% endif %}>Daman and Diu</option>
                                <option value="Delhi" {% if rbill.source_supply == "Delhi" %} selected {% endif %}>Delhi</option>
                                <option value="Goa" {% if rbill.source_supply == "Goa" %} selected {% endif %}>Goa</option>
                                <option value="Gujarat" {% if rbill.source_supply == "Gujarat" %} selected {% endif %}>Gujarat</option>
                                <option value="Haryana" {% if rbill.source_supply == "Haryana" %} selected {% endif %}>Haryana</option>
                                <option value="Himachal Pradesh" {% if rbill.source_supply == "Himachal Pradesh" %} selected {% endif %}>Himachal Pradesh</option>
                                <option value="Jammu and Kashmir" {% if rbill.source_supply == "Jammu and Kashmir" %} selected {% endif %}>Jammu and Kashmir</option>
                                <option value="Jharkhand" {% if rbill.source_supply == "Jharkhand" %} selected {% endif %}>Jharkhand</option>
                                <option value="Karnataka" {% if rbill.source_supply == "Karnataka" %} selected {% endif %}>Karnataka</option>
                                <option value="Kerala" {% if rbill.source_supply == "Kerala" %} selected {% endif %}>Kerala</option>
                                <option value="Ladakh" {% if rbill.source_supply == "Ladakh" %} selected {% endif %}>Ladakh</option>
                                <option value="Lakshadweep" {% if rbill.source_supply == "Lakshadweep" %} selected {% endif %}>Lakshadweep</option>
                                <option value="Madhya Pradesh" {% if rbill.source_supply == "Madhya Pradesh" %} selected {% endif %}>Madhya Pradesh</option>
                                <option value="Maharashtra" {% if rbill.source_supply == "Maharashtra" %} selected {% endif %}>Maharashtra</option>
                                <option value="Manipur" {% if rbill.source_supply == "Manipur" %} selected {% endif %}>Manipur</option>
                                <option value="Meghalaya" {% if rbill.source_supply == "Meghalaya" %} selected {% endif %}>Meghalaya</option>
                                <option value="Mizoram" {% if rbill.source_supply == "Mizoram" %} selected {% endif %}>Mizoram</option>
                                <option value="Nagaland" {% if rbill.source_supply == "Nagaland" %} selected {% endif %}>Nagaland</option>
                                <option value="Odisha" {% if rbill.source_supply == "Odisha" %} selected {% endif %}>Odisha</option>
                                <option value="Puducherry" {% if rbill.source_supply == "Puducherry" %} selected {% endif %}>Puducherry</option>
                                <option value="Punjab" {% if rbill.source_supply == "Punjab" %} selected {% endif %}>Punjab</option>
                                <option value="Rajasthan" {% if rbill.source_supply == "Rajasthan" %} selected {% endif %}>Rajasthan</option>
                                <option value="Sikkim" {% if rbill.source_supply == "Sikkim" %} selected {% endif %}>Sikkim</option>
                                <option value="Tamil Nadu" {% if rbill.source_supply == "Tamil Nadu" %} selected {% endif %}>Tamil Nadu</option>
                                <option value="Telangana" {% if rbill.source_supply == "Telangana" %} selected {% endif %}>Telangana</option>
                                <option value="Tripura" {% if rbill.source_supply == "Tripura" %} selected {% endif %}>Tripura</option>
                                <option value="Uttar Pradesh" {% if rbill.source_supply == "Uttar Pradesh" %} selected {% endif %}>Uttar Pradesh</option>
                                <option value="Uttarakhand" {% if rbill.source_supply == "Uttarakhand" %} selected {% endif %}>Uttarakhand</option>
                                <option value="West Bengal" {% if rbill.source_supply == "West Bengal" %} selected {% endif %}>West Bengal</option>
                                <option value="Other Territory" {% if rbill.source_supply == "Other Territory" %} selected {% endif %}>Other Territory</option>
                            </select>
                        </div>
                        
                       </div>
                          <hr>
                          <br><br>
                          <div class="row">
                              <div class="col-md-3 mt-2"><h5>Bill Details</h5></div>
                              <div class="col-md-3 mt-2"></div>
                              <!-- <div class="col-md-3 mt-2">
                                  <label>Bill Number</label>
                                  <div class="d-flex">
                                      <input name="" type="number" class="form-control" placeholder="1000">
                                      <a class="form-control" data-target="#porderno" data-toggle="modal" style="width: 60px; cursor: pointer;"><center><i class="fa fa-gear"></i></center></i></a>
                                  </div>
                              </div> -->
                          </div>
                          <hr>

                          <div class="row">

      
                            <div class="col-md-3 mt-2">
                                <label for="">Recurring Bill No.</label><span class="text-danger mt-1 ml-3" id="dangerdiv" style="display: none;"><span class="text-white"> (</span>This Id Should be Continous <span class="text-white">)</span></span>
                                <input type="text" class="form-control" id="bill_code_number" name="bill_code_number" value="{{rbill.billno}}" placeholder="{{ord_no}}" required>
                              </div>
                              <div class="col-md-3 mt-2">
                                <label for="">Reference Number </label>
                                <input type="number" class="form-control" id="" name="Reference" value="{{rbill.refference}}" readonly>
                            </div>
                            
                              <div class="col-md-3 mt-2">
                                  <label for="">Profile Name </label>
                                  <input type="text" class="form-control" id="" name="profile_name" placeholder="" value="{{rbill.profile_name}}">   
                              </div>
                              <div class="col-md-3 mt-2">
                                <label for="">Purchase Order </label>
                                <input type="text" class="form-control" id="" name="profile_name" placeholder="" value="{{rbill.purchase_order}}">   
                            </div>
                              <div class="col-md-3 mt-2">
                                
                                <label for="">Repeat Every</label>
                                <div class="d-flex">
                                    <select class="form-control" name="repeat_every" id="repeat">
                               
                                        {% for r in re %}
                                            <option value="{{ r.repeat }}" {% if rbill.repeat_every == r.repeat %} selected {% endif %}>{{ r.repeat }}</option>
                                        {% endfor %}
                                    </select>
                                    <a>
                                        <button type="button" class="btn btn-outline-secondary ml-1" 
                                        data-target="#newrepeat" data-toggle="modal">+</button>
                                    </a>
                              
                                </div>
                            </div>
                        </div>
                          <hr>
                          <div class="row">
                              <div class="col-md-3 mt-2"><h5>Customer Details</h5></div>
                              <div class="col-md-3 mt-2"></div>
                             
                          </div>
                          <hr>
                          
                          <div class="row mt-3">
                            <div class="col-md-4">
            
        
                                <label class="col-form-label mt-2">Customer</label>
                                <div class="d-flex">
                                    <select name="customer_name" id="customer" class="custom-select">
                                        <option selected >Select Customer</option>
                                        {% for ct in cust %}
                                        <option value="{{ct.customerid}} {{ ct.firstname }} {{ ct.lastname }}" {% if ct.firstname == c.firstname and ct.lastname == c.lastname %}selected{% endif %}>{{ ct.title }} {{ ct.firstname }} {{ ct.lastname }}</option>
                                        {% endfor %}
                                    </select>
                                    <a class="btn btn-outline-secondary ml-1" role="button" data-target="#customercreation" data-toggle="modal">+</a>
                                </div><br>
        

                                <label class="col-form-label mt-2">GST Type</label>
                                <input type="text" class="form-control" id="gsttype" name="gsttype" style="background-color: #43596c;" >
        
        
                            </div>
        
                            <div class="col-md-4">
                                <label class="col-form-label mt-2">Email</label>
                                <input type="text" class="form-control" id="cust_email" name="cemail" placeholder="Email" style="background-color: #43596c;"  ><br>
                                <div id="gstnodiv" style="display: none;" class="mt-2">
                                    <label class="col-form-label">GSTIN</label>
                                    <input type="text" class="form-control" id="gstn" name="gstin_inp" style="background-color: #43596c;" >
                                </div>
                               
                            </div>
                                              
                    <div class="col-md-4">
                        <label class="col-form-label">Billing Address</label>
                        <label for="billingaddress"></label>
                        <textarea class="form-control" rows="6" id="bname" name="billingaddress" style="background-color: #43596c; margin-bottom: 10px;"  ></textarea>

                       
                    </div>
                    <div class="col-md-4">
                        
                        <label class="col-form-label mt-2">Place of supply</label>
                        <select type="text" class="form-control" id="plosu" name="placosupply" style="background-color: #43596c; color: white;" >
                          <!-- <option value="{{ cmp1.state }}" selected> {{ cmp1.state }}</option> -->
                          <option value="{{rbill.place_supply}}" selected > {{rbill.place_supply}}</option>

                          <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads</option>
                          <option value="Andhra Predhesh">Andhra Predhesh</option>
                          <option value="Arunachal Predesh">Arunachal Predesh</option>
                          <option value="Assam">Assam</option>
                          <option value="Bihar">Bihar</option>
                          <option value="Chandigarh">Chandigarh</option>
                          <option value="Chhattisgarh">Chhattisgarh</option>
                          <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                          <option value="Damn anad Diu">Damn anad Diu</option>
                          <option value="Delhi">Delhi</option>
                          <option value="Goa">Goa</option>
                          <option value="Gujarat">Gujarat</option>
                          <option value="Haryana">Haryana</option>
                          <option value="Himachal Predesh">Himachal Predesh</option>
                          <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                          <option value="Jharkhand">Jharkhand</option>
                          <option value="Karnataka">Karnataka</option>
                          <option value="Kerala">Kerala</option>
                          <option value="Ladakh">Ladakh</option>
                          <option value="Lakshadweep">Lakshadweep</option>
                          <option value="Madhya Predesh">Madhya Predesh</option>
                          <option value="Maharashtra">Maharashtra</option>
                          <option value="Manipur">Manipur</option>
                          <option value="Meghalaya">Meghalaya</option>
                          <option value="Mizoram">Mizoram</option>
                          <option value="Nagaland">Nagaland</option>
                          <option value="Odisha">Odisha</option>
                          <option value="Puducherry">Puducherry</option>
                          <option value="Punjab">Punjab</option>
                          <option value="Rajasthan">Rajasthan</option>
                          <option value="Sikkim">Sikkim</option>
                          <option value="Tamil Nadu">Tamil Nadu</option>
                          <option value="Telangana">Telangana</option>
                          <option value="Tripura">Tripura</option>
                          <option value="Uttar Predesh">Uttar Predesh</option>
                          <option value="Uttarakhand">Uttarakhand</option>
                          <option value="West Bengal">West Bengal</option>
                          <option value="Other Territory">Other Territory</option>
                        </select>
                       
                    </div>
                    <!-- <div class="col-md-3"></div>
                    <div class="col-md-3"></div> -->
                </div>
                       
                          <hr>
                          <div class="row">
                            <div class="col-md-3 mt-2">
                                <label for="">Start Date</label>
                                <input type="date" class="form-control" id="date" name="start_date" onchange="showdate()" value="{{ rbill.start_date | date:'Y-m-d'  }}">
                            </div>
                            

                            <div class="col-md-3 mt-2">
                                <label>End Date</label>
                                <input type="text" id="duedat" class="form-control" name="end_date" value="{{ rbill.end_date}}">
                            </div>
                           
                        </div>
                        <div class="row">
                            <div class="col-md-3 mt-2">
                                <label for="">Payment Terms</label>
                                <div class="d-flex">
                                    <select class="custom-select" name="payment_terms" id="termadd2">
                                        <option value="" id="trmopt2">Select Payment Terms</option>
                                        <option value="0" {% if rbill.payment_terms == '0' %}selected{% endif %}>Due on Receipt</option>
                                        <option value="15" {% if rbill.payment_terms == '15' %}selected{% endif %}>NET 15</option>
                                        <option value="30" {% if rbill.payment_terms == '30' %}selected{% endif %}>NET 30</option>
                                        <option value="60" {% if rbill.payment_terms == '60' %}selected{% endif %}>NET 60</option>
                                        {% for pd in cpd %}
                                            <option value="{{ pd.newperiod }}" {% if rbill.payment_terms == pd.newperiod %}selected{% endif %}>NET {{ pd.newperiod }}</option>
                                        {% endfor %}
                                    </select>
                                    <a class="btn btn-outline-secondary ml-1" data-target="#crperiod2" data-toggle="modal">+</a>
                                </div> 
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <label class="col-form-label">Payment Type</label>
                                <select class="form-control my-select" id="pay_method" name="payment_method" style="background-color: #43596c;">
                                    <option value="{{rbill.payment_method}}" selected hidden>{{rbill.payment_method}}</option>
                                    <option value="cash">Cash</option>
                                    <option value="cheque">Cheque</option>
                                    <option value="upi">UPI</option>
                                    {% for i in bank %}
                                      <option value="{{i.bankname}}">{{i.bankname}}</option>
                                    {% endfor %}
                                  </select>
                            </div>
                            <div class="col-md-3" style="display:none;"  id="chequediv">
                                <label class="col-form-label" >Cheque No</label>
                                <input type="text" class="form-control" name="cheque_id" value="{{rbill.cheque_no}}" id="cheque_id" placeholder="Enter Cheque No">
                            </div>
                            <div class="col-md-3"  style="display:none;" id="upidiv">
                                <label class="col-form-label" >UPI ID</label>
                                <input type="text" class="form-control" name="upi_id" value="{{rbill.upi_no}}" id="upi_id" placeholder="Enter UPI ID">
                            </div>
                            <div class="col-md-3"  style="display:none;" id="bnkdiv">
                                <label class="col-form-label" >Bank Account</label>
                                <input type="text" class="form-control" name="bnk_id" id="bnk_id" style="background-color: #43596c;" readonly>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-md-2"></div>
                            <div class="col-md-4"></div>
                            <div class="col-md-2"></div>
                            <div class="col-md-2"></div>
                        </div>  
                        <div class="row clearfix">
                            <div class="col-md-12 table-responsive-md mt-3">
                              <table class="table table-bordered table-hover mt-3" id="tab_logic">
                                <thead>
                                  <tr>
                                    <th class="text-center">#</th>
                                    <th class="text-center" >ITEM</th>
                                    <th class="text-center">HSN</th>
                                    <!-- <th class="text-center">DESCRIPTION</th> -->
                                    <th class="text-center">QTY</th>
                                    <th class="text-center">PRICE</th>
                                    <th class="text-center">TAX (%)</th>
                                    <th class="text-center">DISCOUNT</th>
                                    <th class="text-center">TOTAL</th>
                                    
                                  </tr>
                                </thead>
                                <tbody id="items-table-body">
                                    {% for j in ritem%}
                                    <tr id='addr0{{ forloop.counter }}'>
                                      <td class="nnum">{{ forloop.counter }}  <input type="text"  name='id[]' value="{{ j.id }}" hidden>
                                        </td>
                                      <td style="width: 20%;">
                                          <div class="d-flex">
                                        <select name='item[]' id="item{{ forloop.counter }}" class="form-control item" style="background-color: #2f516f; color: white;">
                  
                                          <option value="{{ j.item }}" selected>{{ j.item }}</option>
                                          {% for i in item %}
                                          {% if i.cid_id == cmp1.cid %}
                                              <option 
                                                      value="{{ i.name  }}">{{ i.name  }} </option>
                                          {% endif %}
                                          {% endfor %}
                                          
                                        </select>
                                        <a href="#">
                                          <button type="button" class="btn btn-outline-secondary ml-1" 
                                          data-target="#newitem" data-toggle="modal">+</button>
                                      </a>
                                      </div>
                                      </td>
                                      <td><input type="text" name='hsn[]'  value="{{ j.hsn }}" id="hsn{{ forloop.counter }}" placeholder='Enter HSN Code' class="form-control" style="background-color: #2f516f; color: white;" /></td>
                                      <!-- <td><input type="text" name='description[]'  value="{{ j.description }}"  id="description{{ forloop.counter }}" placeholder='Description' class="form-control" style="background-color: #2f516f; color: white;" /></td> -->
                                      <td><input type="number" name='qty[]' value="{{ j.qty  }}"  placeholder='Enter Qty' id="qty{{ forloop.counter }}" value=0 class="form-control qty" step=0 min=0 style="background-color: #2f516f; color: white;" />
                                        <span id="qtyspan{{ forloop.counter }}" class='text-muted'></span>
                                      </td>
                                      <td><input type="number" name='price[]' value="{{ j.price}}" id="unit{{ forloop.counter }}" placeholder='Enter Unit Price' class="form-control price" step="0.00" min="0" style="background-color: #2f516f; color: white;" /></td>
                                      
                                      <td style="width: 13%;">
                                        <input hidden value="{{cmp1.state}}" id="cmpstate">
                                        <input type="text"  id="select_tax" placeholder="Tax Rate" class="form-control seltax d-none">
                                        <select name='tax1[]' id="tax1{{ forloop.counter }}" class="form-control tax intra_tax d-none">
                                            <option selected value="{{j.tax}}">{{j.tax}}% GST ({{j.tax}}%)</option>
                                            <option value=28 >28.0% GST(28%)</option>
                                            <option value=18 >18.0% GST(18%)</option>
                                            <option value=12  >12.0% GST(12%)</option>
                                              <option value=5  >05.0% GST(05%)</option>
                                            <option value=3  >03.0% GST(03%)</option>
                                              <option value=0  >0.0% GST(0%)</option>
                                        </select>
                                        <select name='tax2[]' id="tax2{{ forloop.counter }}" class="form-control tax inter_tax d-none">
                                            <option selected value="{{j.tax}}">{{j.tax}}% IGST ({{j.tax}}%)</option>
                                            <option value=28 >28.0% IGST(28%)</option>
                                            <option value=18 >18.0% IGST(18%)</option>
                                            <option value=12  >12.0% IGST(12%)</option>
                                              <option value=5  >05.0% IGST(05%)</option>
                                            <option value=3  >03.0% IGST(03%)</option>
                                              <option value=0  >0.0% IGST(0%)</option>

                                        
                                        </select>
                                                         
                                      </td>
                
                                    
                                    <td>
                                    <input type="number" name='discount[]' placeholder='Enter Discount' id="disc{{forloop.counter}}" value="{{j.discount|default:0}}" class="form-control disc" step=0 min=0>
                                     </td>
                                      <td><input type="number" name='total[]' value="{{ j.total }}" id="total{{ forloop.counter }}" placeholder=0 class="form-control total" value=0 step="any" readonly style="background-color: #2f516f; color: white;" /></td>
                                      <td style="display: none;"><input type="number" step="any" name='taxamount1' id="taxamount{{ forloop.counter }}" class="form-control taxamount" />
                                      </td>
                                    <td>
                                        <button type="button" id="{{forloop.counter}}" class="btn  clone_row btn-outline-secondary ml-1 px-2 py-1 mx-1" style="width: 40px;" title="Clone Row">+</button><br>
                                        <button type="button" id="{{forloop.counter}}" class="btn  remove_row btn-outline-secondary ml-1 px-2 py-1 mx-1 mt-1"  style="width: 40px;"title="Remove Row">-</button>
                                  </td>
                                </tr>
                                {% endfor %}
              
                                </tbody>
                                
                                <tr>
                                    <td style="border: none;"><a class="btn btn-outline-secondary ml-1" role="button" id="add">+</a></td>
                                </tr>
                               
                              </table>
                
                            </div>
                          </div>
                          <div class="row clearfix" style="margin-top:20px">
                            <div class="col-md-6 mt-3">
                                <label for="">Note</label>
                                <div class="form-row">
                                    <textarea class="form-control" name="note" rows="3">{{rbill.note}}</textarea>
                                </div><br>
                                <div>
                                    <input type="file" class="form-control" name="file">
                                </div><br>
                                
                                <div>
                                </div>
                            </div>
                            <div class="row clearfix" style="margin-top:20px">
                            </div>
                            <div class="col-md-1"></div>
                              <div class="col-md-5 table-responsive-md mt-3" id="tab_logic_total" style="background-color:rgba(0,0,0,.4); border: 1px solid rgba(128, 128, 128, 0.6);">
                                  <div class="p-3">
                                      <div class="row container-fluid p-2 m-0">
                                          <div class="col-sm-4 mt-2"><label class="text-center">Sub Total</label></div>
                                          <div class="col-sm-1 mt-2">:</div>
                                          <div class="col-sm-7 mt-2"><input type="number" step="any" name='sub_total' placeholder=0 value="{{rbill.sub_total}}"
                                              class="form-control" id="sub_total">
                                          </div>
                                          <div class="col-sm-4 m-0 p-0"></div>
                                      </div>
                                      <div class="row container-fluid p-2 m-0" id="igst1">
                                          <div class="col-sm-4 mt-2"><label for="a" class="text-center">IGST</label></div>
                                          <div class="col-sm-1 mt-2">:</div>
                                          <div class="col-sm-7 mt-2"><input type="number" name='igst' step="any" id="igst" placeholder=0 value="{{rbill.igst}}"
                                              class="form-control"/>
                                          </div>
                                          <div class="col-sm-4 m-0 p-0"></div>
                                      </div>
                                      <div class="row container-fluid p-2 m-0" style="display: none;" id="cgst1">
                                          <div class="col-sm-4 mt-2"><label for="a" class="text-center">CGST</label></div>
                                          <div class="col-sm-1 mt-2">:</div>
                                          <div class="col-sm-7 mt-2"><input type="number" name='cgst' step="any" id="cgst" placeholder=0 value="{{rbill.cgst}}"
                                              class="form-control"/>
                                          </div>
                                          <div class="col-sm-4 m-0 p-0"></div>
                                      </div>
                                      <div class="row container-fluid p-2 m-0" style="display: none;" id="sgst1">
                                          <div class="col-sm-4 mt-2"><label for="a" class="text-center">SGST</label></div>
                                          <div class="col-sm-1 mt-2">:</div>
                                          <div class="col-sm-7 mt-2"><input type="number" name='sgst' step="any" id="sgst" placeholder=0 value="{{rbill.sgst}}"
                                              class="form-control"/>
                                          </div>
                                          <div class="col-sm-4 m-0 p-0"></div>
                                      </div>
                                      <div class="row container-fluid p-2 m-0">
                                          <div class="col-sm-4 mt-2"><label for="a" class="text-center">Tax Amount</label></div>
                                          <div class="col-sm-1 mt-2">:</div>
                                          <div class="col-sm-7 mt-2"><input type="number" step="any" name='tax_amount' id="tax_amount" placeholder='0.00' value="{{rbill.tax_amount}}"
                                              class="form-control"/>
                                          </div>
                                          <div class="col-sm-4 m-0 p-0"></div>
                
                                      </div>
                                      
                                      <div class="row container-fluid p-2 m-0">
                                          <div class="col-sm-4 mt-2"><label for="a" class="text-center">Shipping Charge</label></div>
                                          <div class="col-sm-1 mt-2">:</div>
                                          <div class="col-sm-7 mt-2"><input type="number" step="any" name='shipping_charge' id="ship" placeholder='0.00'  value="{{rbill.shipping_charge}}"
                                              class="form-control"/>
                                          </div>
                                          <div class="col-sm-4 m-0 p-0"></div>
                                      </div>
                                      <div class="row container-fluid p-2 m-0">
                                          <div class="col-sm-4 mt-2"><label for="a" class="text-center">Adjustment</label></div>
                                          <div class="col-sm-1 mt-2">:</div>
                                          <div class="col-sm-7 mt-2"><input type="number" value="{{rbill.adjustment}}"  name='adjustment' id="adj" placeholder='0' 
                                              class="form-control"/>
                                          </div>
                                          <div class="col-sm-4 m-0 p-0"></div>
                                      </div>
                                      <div class="row container-fluid p-2 m-0">
                                          <div class="col-sm-4 mt-2"><label for="a" class="text-center">Grand Total</label></div>
                                          <div class="col-sm-1 mt-2">:</div>
                                          <div class="col-sm-7 mt-2"><input type="number" name='grand_total' id="grandtotal" placeholder='0.00' readonly value="{{rbill.grand_total}}"
                                              class="form-control"/>
                                          </div>
                                          <div class="col-sm-4 m-0 p-0"></div>
                                      </div>
                                      <div class="row container-fluid  p-2 m-0">
                                        
                                        <div class="col-sm-4 mt-2">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="" id="invalidCheck">
                                                <label>Paid</label>
                                                
                                            </div>
                                        </div>
                                        <div class="col-sm-1 mt-2"></div>
                                        <div class="col-sm-7 mt-2">
                                            <input type="number" class="form-control" value="{{rbill.paid_amount}}" id="paid_amount"   name="paid_amount"
                                            class="form-control">
                                            <p id="error-message" class="mt-1" style="color: red;"></p>
                                        </div>
                                        <div class="col-sm-4 m-0 p-0"></div>
                                    </div>
                                    <div class="row container-fluid  p-2 m-0" >
                                        <div class="col-sm-4 mt-2"><label for="a" class="text-center">Balance Due</label></div>
                                        <div class="col-sm-1 mt-2"></div>
                                        <div class="col-sm-7 mt-2">
                                            <input type="number" name="bal_due" value="{{rbill.balance}}" id="bal_due" placeholder="0" 
                                            class="form-control" readonly >
                                            
                                        </div>
                                        <div class="col-sm-4 m-0 p-0"></div>
                                    </div>
                                  </div>
                                  
                              </div>
                        </div>
                
                        
                        <div class="notices mt-3">
                            <div class="text-muted">NOTICE:</div>
                            <div class="text-muted">
                              Fin sYs Terms and Conditions Apply
                            </div>
                          </div>
                          <footer class="text-muted">Purchase was created on a computer and is valid without the
                            signature and seal.
                        </footer>
                        <div class="row mt-3">
                            <div class="col">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                                    <label>Agree to terms and conditions</label>
                                    <div class="invalid-feedback">You must agree before submitting.</div>
                                </div>
                            </div>
                        </div> 
                        <div class="row">
                            <div class="col-md-4"></div>
                            <div class="col-md-4">
                                <button class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3"
                                        type="submit">
                                    EDIT
                                </button>
                            </div>
                            <div class="col-md-4"></div>
                        </div>
                    {% endif %}
                </form>

          

                <!-- < <div class="modal fade" id="newvendor">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content" style="background-color: #213b52;">
                            <div class="modal-header"> -->
         

<div class="modal fade" id="newvendor">
        <div class="modal-dialog modal-xl">
            <div class="modal-content" style="background-color: #213b52;">
                <div class="modal-header">
                    <h3 class="m-3">New Vendor</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
      <div class="modal-body">
        <div class="card p-3 m-3">
            <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalVendor">
                {% csrf_token %}
                {% if user.is_authenticated %}
                    <div class="row">
                        <div class="col-md-3 mt-2">
                            <label for="validationCustom01">Title</label>
                            <select name="title" id="title" class="form-control">
                                <option value="Mr">Mr</option>
                                <option value="Mrs">Mrs</option>
                                <option value="Miss">Miss</option>
                                <option value="Ms">Ms</option>
                            </select>
                        </div>
                        <div class="col-md-3 mt-2">
                            <label for="fname">First name</label>
                            <input type="text" class="form-control" id="fname" name="firstname"
                                   required>
                            <div class="valid-feedback">Looks good!</div>
                        </div>
                        <div class="col-md-3 mt-2">
                            <label for="lname">Last name</label>
                            <input type="text" class="form-control" id="lname" name="lastname">
                        </div>
                        <div class="col-md-3 mt-2">
                            <label for="company">Company</label>
                            <input type="text" class="form-control" id="company" name="company_name">
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-4 mt-3">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email" name="email"
                                placeholder="finsys@mail.com">
                        </div>
                        <div class="col-md-4 mt-3">
                            <label for="wsite">Website</label>
                            <input type="text" class="form-control" id="wsite"
                                placeholder="www.finsys.com" name="website">
                        </div>
                        <div class="col-md-4 mt-3">
                            <label for="mobile">Mobile</label>
                            <input type="text" class="form-control" id="mobile"
                                placeholder="Mobile number" maxlength="10"
                                name="mobile">
                        </div>
                    </div>
                    <hr>
                    <center><h4><b>Other Options</b></h4></center>
                    <hr>
                    <div class="row">
                        <div class="col-md-4 mt-3">
                            <label for="validationCustom04">GST Treatment</label>
                            <select class="form-control" id="gsttyp" name="gsttype" onchange="showgsttyp()"
                                onclick="hidinput('hello', this)" required>
                                <option selected disabled value="">Choose..</option>
                                <option value="Registered Business - Regular">Registered Business - Regular <span><i>(Business that is registered under gst)</i></span></option>
                                <option value="Registered Business - Composition">Registered Business - Composition (Business that is registered under composition scheme in gst)</option>
                                <option value="unregistered Business">Unregistered Business (Business that has not been registered under gst)</option>
                                <option value="Overseas">Overseas (Import/Export of supply outside india)</option>
                                <option value="Special Economic Zone (SEZ)">Special Economic Zone (SEZ) (Business that is located in a special economic zone of india or a SEZ developer)</option>
                                <option value="Demed Exports">Demed Exports (Supply of woods to an exports oriented unit or againsed advanced authorization or export promotion capital woods)</option>
                                <option value="Tax Deductor">Tax Deductor (State of central gov,government agencies or local authority)</option>
                                <option value="SEZ Developer">SEZ Developer (A person or organization who owns atleast 26% eqaulity in creating business units in special economic zone)</option>
                            </select>
                        </div>
                        <div class="col-md-4 mt-3">
                            <div id="hello">
                                <label for="gstin">GSTIN</label>
                                <input type="text" class="form-control" onchange="checkgst(this)"
                                    id="gstin" name="gstin"
                                    placeholder="29APPCK7465F1Z1">
                                <a href="https://services.gst.gov.in/services/searchtp"
                                    target="_blank" style="color:#3dd5f3">Get Taxpayer details ?</a>
                                <div class="text-danger m-2" id="warngst"></div>
                            </div>
                        </div>
                        <div class="col-md-4 mt-3">
                            <label for="validationCustom03">PAN NO</label>
                            <input type="text" class="form-control" id="panno" name="panno"
                            placeholder="APPCK7465F">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 mt-2">
                           <label for="">Place of Supply</label>
                            <select class="form-control" id="ssupply" name="sourceofsupply">
                                <option value="Nill"></option>
                                <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                                <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                                <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                                <option value="[AS] Assam">[AS] Assam</option>
                                <option value="[BR] Bihar">[BR] Bihar</option>
                                <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                                <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                                <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                                <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                                <option value="[DL] Delhi">[DL] Delhi</option>
                                <option value="[GA] Goa">[GA] Goa</option>
                                <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                                <option value="[HR] Haryana">[HR] Haryana</option>
                                <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                                <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                                <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                                <option value="[KA] Karnataka">[KA] Karnataka</option>
                                <option value="[KL] Kerala">[KL] Kerala</option>
                                <option value="[LA] Ladakh">[LA] Ladakh</option>
                                <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                                <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                                <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                                <option value="[MN] Manipur">[MN] Manipur</option>
                                <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                                <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                                <option value="[NL] Nagaland">[NL] Nagaland</option>
                                <option value="[OD] Odisha">[OD] Odisha</option>
                                <option value="[PY] Puducherry">[PY] Puducherry</option>
                                <option value="[PB] Punjab">[PB] Punjab</option>
                                <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                                <option value="[SK] Sikkim">[SK] Sikkim</option>
                                <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                                <option value="[TS] Telangana">[TS] Telangana</option>
                                <option value="[TR] Tripura">[TR] Tripura</option>
                                <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                                <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                                <option value="[WB] West Bengal">[WB] West Bengal</option>
                                <option value="[OT] Other Territory">[OT] Other Territory</option>
                            </select>
                        </div>
                        
                        <div class="col-md-3 mt-2">
                            <label for="">Currency</label>
                            <div class="d-flex">
                                <input type="text" class="form-control" id="currency" name="currency" placeholder="INR - Indian Rupee"
                                    id="">
                                <a href="#">
                                    <button type="button" class="btn btn-outline-secondary ml-1">+</button>
                                </a> 
                            </div>   
                        </div>
                        
                        <div class="col-md-3 mt-2">
                           <label for="">Opening Balance</label>
                           <div class="d-flex">
                            <p class="form-control" style="width: 60px;">INR</p>
                            <input type="number" class="form-control" name="openingbalance" placeholder="INR" id="openingbalance">
                           </div>
                        </div>
                        <div class="col-md-3 mt-2">
                            <label for="">Payment Terms</label>
                            <div class="d-flex">
                             <select class="form-control" name="paymentterms" id="paymentterms">
                                 <option selected id="trmopt"></option>
                                 <option value="0">Due on Receipt</option>
                                 <option value="15">NET 15</option>
                                 <option value="30">NET 30</option>
                                 <option value="60">NET 60</option>
                                 {% for pd in cpd %}
                                     <option value="{{ pd.newperiod }}">NET {{ pd.newperiod }}</option>
                                 {% endfor %}
                             </select>
                             <a class="btn btn-outline-secondary ml-1" data-target="#crperiod" data-toggle="modal">+</a>
                         </div> 
                         </div>
                        <div class="row" style="display: none;">
                            <div class="col-md-3 mt-2" >
                                <label for="">Date</label>
                                <input type="date" id="date2" class="form-control" name="date">
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-6 mt-5">
                            <div class="row">
                                <div class="col-md-12 card-title">
                                    <h5 class="mb-0">Billing Address</h5>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mt-3">
                                    <div class="form-row">
                                        <label for="street">Street</label>
                                        <textarea class="form-control street" id="street" name="street"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="city">City</label>
                                        <input type="text" class="form-control" id="city"
                                            name="city"
                                            placeholder="City">
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="state">State</label>
                                        <select type="text" class="form-control" id="state" name="state">
                                            <option value="" selected>Choose</option>
                                            <option value="None Of This">None Of This</option>
                                            <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                            </option>
                                            <option value="Andhra Predhesh">Andhra Predhesh</option>
                                            <option value="Arunachal Predesh">Arunachal Predesh</option>
                                            <option value="Assam">Assam</option>
                                            <option value="Bihar">Bihar</option>
                                            <option value="Chandigarh">Chandigarh</option>
                                            <option value="Chhattisgarh">Chhattisgarh</option>
                                            <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                            <option value="Damn anad Diu">Damn anad Diu</option>
                                            <option value="Delhi">Delhi</option>
                                            <option value="Goa">Goa</option>
                                            <option value="Gujarat">Gujarat</option>
                                            <option value="Haryana">Haryana</option>
                                            <option value="Himachal Predesh">Himachal Predesh</option>
                                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                            <option value="Jharkhand">Jharkhand</option>
                                            <option value="Karnataka">Karnataka</option>
                                            <option value="Kerala">Kerala</option>
                                            <option value="Ladakh">Ladakh</option>
                                            <option value="Lakshadweep">Lakshadweep</option>
                                            <option value="Madhya Predesh">Madhya Predesh</option>
                                            <option value="Maharashtra">Maharashtra</option>
                                            <option value="Manipur">Manipur</option>
                                            <option value="Meghalaya">Meghalaya</option>
                                            <option value="Mizoram">Mizoram</option>
                                            <option value="Nagaland">Nagaland</option>
                                            <option value="Odisha">Odisha</option>
                                            <option value="Puducherry">Puducherry</option>
                                            <option value="Punjab">Punjab</option>
                                            <option value="Rajasthan">Rajasthan</option>
                                            <option value="Sikkim">Sikkim</option>
                                            <option value="Tamil Nadu">Tamil Nadu</option>
                                            <option value="Telangana">Telangana</option>
                                            <option value="Tripura">Tripura</option>
                                            <option value="Uttar Predesh">Uttar Predesh</option>
                                            <option value="Uttarakhand">Uttarakhand</option>
                                            <option value="West Bengal">West Bengal</option>
                                            <option value="Other Territory">Other Territory</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="pinco">Pin Code</label>
                                        <input type="text" class="form-control" id="pincode"
                                            name="pincode" maxlength="6"
                                            placeholder="PIN Code">
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="country">Country</label>
                                        <input type="text" class="form-control" id="country"
                                            name="country"
                                            placeholder="Country">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mt-5">
                            <div class="row">
                                <div class="col-md-12 d-flex">
                                    <h5>Shipping Address</h5>
                                    <input class="ml-4 mt-2 ml-2" type="checkbox" onclick="poppins()" id="okay"
                                           name="okay">
                                    <label class="ml-2 mt-1 ml-2" for="okay">Same As Billing Address</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mt-3">
                                    <div class="form-row">
                                        <label for="shipstreet">Street</label>
                                        <textarea class="form-control" id="shipstreet"
                                            name="shipstreet"
                                            ></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shipcity">City</label>
                                        <input type="text" class="form-control" id="shipcity"
                                            name="shipcity" placeholder="City">
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shipstate">State</label>
                                        <select type="text" class="form-control" id="plosu" name="shipstate">
                                            <option id="shipst" selected>Choose</option>
                                            <option value="None Of This">None Of This</option>
                                            <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                            </option>
                                            <option value="Andhra Predhesh">Andhra Predhesh</option>
                                            <option value="Arunachal Predesh">Arunachal Predesh</option>
                                            <option value="Assam">Assam</option>
                                            <option value="Bihar">Bihar</option>
                                            <option value="Chandigarh">Chandigarh</option>
                                            <option value="Chhattisgarh">Chhattisgarh</option>
                                            <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                            <option value="Damn anad Diu">Damn anad Diu</option>
                                            <option value="Delhi">Delhi</option>
                                            <option value="Goa">Goa</option>
                                            <option value="Gujarat">Gujarat</option>
                                            <option value="Haryana">Haryana</option>
                                            <option value="Himachal Predesh">Himachal Predesh</option>
                                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                            <option value="Jharkhand">Jharkhand</option>
                                            <option value="Karnataka">Karnataka</option>
                                            <option value="Kerala">Kerala</option>
                                            <option value="Ladakh">Ladakh</option>
                                            <option value="Lakshadweep">Lakshadweep</option>
                                            <option value="Madhya Predesh">Madhya Predesh</option>
                                            <option value="Maharashtra">Maharashtra</option>
                                            <option value="Manipur">Manipur</option>
                                            <option value="Meghalaya">Meghalaya</option>
                                            <option value="Mizoram">Mizoram</option>
                                            <option value="Nagaland">Nagaland</option>
                                            <option value="Odisha">Odisha</option>
                                            <option value="Puducherry">Puducherry</option>
                                            <option value="Punjab">Punjab</option>
                                            <option value="Rajasthan">Rajasthan</option>
                                            <option value="Sikkim">Sikkim</option>
                                            <option value="Tamil Nadu">Tamil Nadu</option>
                                            <option value="Telangana">Telangana</option>
                                            <option value="Tripura">Tripura</option>
                                            <option value="Uttar Predesh">Uttar Predesh</option>
                                            <option value="Uttarakhand">Uttarakhand</option>
                                            <option value="West Bengal">West Bengal</option>
                                            <option value="Other Territory">Other Territory</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shippincode">Pin Code</label>
                                        <input type="text" class="form-control" id="shippincode"
                                            name="shippincode"
                                            placeholder="PIN Code">
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shipcountry">Country</label>
                                        <input type="text" class="form-control" id="shipcountry"
                                            name="shipcountry"
                                            placeholder="Country">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                                <label>Agree to terms and conditions</label>
                                <div class="invalid-feedback">You must agree before submitting.</div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4"></div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3"
                                    type="submit" data-dismiss="modal" id="vendorSave">
                                Submit form
                            </button>
                        </div>
                        <div class="col-md-4"></div>
                    </div>
                {% endif %}
            </form>
        </div>
    </div>
</div>
</div>  
</div>  

<div class="modal fade" id="crperiod">
    <div class="modal-dialog">
        <div class="modal-content" style="background-color: #213b52;">
            <div class="modal-header">
                <h5 class="m-3">New payment Period</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card p-3 m-3">
                    <form action="{% url 'credit_period_rbill' %}" method="post" autocomplete="off">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-2 mt-2"></div>
                            <div class="col-md-5 mt-2">
                                <input type="number" name="newperiod" class="form-control">
                            </div>
                            <div class="col-md-2 mt-2">
                                <button class="btn btn-outline-info text-grey mb-3" type="submit">Save</button>
                            </div>
                        </div>
                    </form>  
                </div>
            </div>
        </div>   
    </div>
</div> 
<div class="modal fade" id="crperiod2">
    <div class="modal-dialog">
        <div class="modal-content" style="background-color: #213b52;">
            <div class="modal-header">
                <h5 class="m-3">New Credit Period</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card p-3 m-3">
                    <form action="{% url 'credit_period_rbill2' %}" method="post" autocomplete="off" id="credit">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-2 mt-2"></div>
                            <div class="col-md-5 mt-2">
                                <input type="number" name="newperiod" id="period" class="form-control">
                            </div>
                            <div class="col-md-2 mt-2">
                                <button class="btn btn-outline-info text-grey mb-3" type="submit" data-dismiss="modal" id="savecredit">Save</button>
                            </div>
                        </div>
                    </form>  
                </div>
            </div>
        </div>   
    </div>
</div> 
<div class="modal fade" id="newrepeat">
    <div class="modal-dialog">
        <div class="modal-content" style="background-color: #213b52;">
            <div class="modal-header">
                <h5 class="m-3">New Repeat Every</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card p-3 m-3">
                    <form action="{% url 'create_repeatevery' %}" method="post" autocomplete="off" id="modalrepeat">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-2 mt-2"></div>
                            <div class="col-md-5 mt-2">
                                <input type="text" name="repeats" class="form-control" id="repeat_input" placeholder="Repeat Every">
                            </div>
                            <div class="col-md-2 mt-2">
                                <button class="btn btn-outline-info text-grey mb-3" data-dismiss="modal" type="submit" id="repeatsave">Save</button>
                            </div>
                        </div>
                    </form>  
                </div>
            </div>
        </div>   
    </div>
</div> 
<div class="modal fade" id="newcustomer">
    <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background-color: #213b52;">
            <div class="modal-header">
                <h3 class="m-3">ADD CUSTOMER</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
  
                <form action="" method="POST" autocomplete="off" id="modalCustomer"> 
  
                    <div class="row">
                        <div class="col-md-4 mt-3">
                            <label for="title">Title</label>
                            <select name="title" id="title1" class="form-control" id="title">
                                <option value="Mr">Mr</option>
                                <option value="Mrs">Mrs</option>
                                <option value="Miss">Miss</option>
                                <option value="Ms">Ms</option>
                            </select>
                            <div class="valid-feedback">Looks good!</div>
                        </div>
                        <div class="col-md-4 mt-3">
                            <label for="firstname">First name</label>
                            <input type="text" class="form-control" id="firstname" name="firstname" 
                                   required style="background-color: #2f516f;color: white;">
                            <div class="valid-feedback">Looks good!</div>
                        </div>
                        <div class="col-md-4 mt-3">
                            <label for="lastname">Last name</label>
                            <input type="text" class="form-control" id="lastname" name="lastname"
                                   required style="background-color: #2f516f;color: white;">
                            <div class="valid-feedback">Looks good!</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mt-3">
                            <label for="company">Company</label>
                            <input type="text" class="form-control" id="company1" name="company"
                                    style="background-color: #2f516f;color: white;">
                            <div class="valid-feedback">Looks good!</div>
                        </div>
                        <div class="col-md-4 mt-3">
                            <label for="location">Location</label>
                            <input type="text" class="form-control" id="location" name="location"
                                    style="background-color: #2f516f;color: white;">
                            <div class="valid-feedback">Looks good!</div>
                        </div>
                        <div class="col-md-4 mt-3"></div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mt-3">
                            <label for="gsttype">GST type</label>
                            <select class="custom-select" id="gsttype" name="gsttype"
                                    onclick="hidinput1('hello1',this)   "
                                    
                                    required
                                    style="background-color: #243e54; color: white;">
                                    <option selected disabled value="">Select GST Type</option>
                                    <option value="Registered Business - Regular">Registered Business - Regular <span><i>(Business that is registered under gst)</i></span></option>
                                    <option value="Registered Business - Composition">Registered Business - Composition (Business that is registered under composition scheme in gst)</option>
                                    <option value="Unregistered Business">Unregistered Business (Business that has not been registered under gst)</option>
                                    <option value="Overseas">Overseas (Import/Export of supply outside india)</option>
                                    <option value="Consumer">Consumer</option>
                                    <option value="Special Economic Zone (SEZ)">Special Economic Zone (SEZ) (Business that is located in a special economic zone of india or a SEZ developer)</option>
                                    <option value="Demed Exports">Demed Exports (Supply of woods to an exports oriented unit or againsed advanced authorization or export promotion capital woods)</option>
                                    <option value="Tax Deductor">Tax Deductor (State of central gov,government agencies or local authority)</option>
                                    <option value="SEZ Developer">SEZ Developer (A person or organization who owns atleast 26% eqaulity in creating business units in special economic zone)</option>
                            </select>
                            <div class="invalid-feedback">Please select a valid registration type.</div>
                        </div>
  
                        <div class="col-md-4 mt-3 gstrow" id="hello1" style="display: none;">
                            <div >
                                <label for="gstin">GSTIN</label>
                                <input type="text" class="form-control" onchange="showMessage(this)"
                                       id="gstin1" name="gstin"
                                       style="background-color: #2f516f;color: white;"
                                       value=""
                                       placeholder="29APPCK7465F1Z1">
                                       <a data-toggle="modal" href="#exampleModal"
                                style="color:#3dd5f3">Get Taxpayer Details</a>
                                <div class="text-danger m-2" id="warngst"></div>
                            </div>
                        </div>
  
                        <div class="col-md-4 mt-3">
                            <label for="panno">PAN NUMBER</label>
                            <input type="text" class="form-control" id="panno1" name="panno"
                                    style="background-color: #2f516f;color: white;"
                                   onchange="checkpan(this)" placeholder="APPCK7465F">
                            <div class="text-danger m-2" id="warnpan"></div>
                        </div>
  
                        <div class="col-md-4 mt-3" >
                          <div>
                              <label for="openbalance">OPENING BALANCE</label>
                              <input type="text" class="form-control" id="openbalance" value=""  name="openbalance"
                                     
                                     style="background-color: #2f516f;color: white;"
                                     >
                              <div class="text-danger m-2" ></div>
                          </div>
                      </div>
  
                    </div>
  
                    <div class="row">
                        <div class="col-md-4 mt-3">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email1" name="email"
                                    style="background-color: #2f516f;color: white;"
                                   placeholder="finsys@mail.com">
                            <div class="invalid-feedback">Please provide a valid Email</div>
                        </div>
                        <div class="col-md-4 mt-3">
                            <label for="website">Website</label>
                            <input type="text" class="form-control" id="website1"
                                   placeholder="www.finsys.com" onchange="checkweb(this)" name="website"
                                   style="background-color: #2f516f;color: white;">
                            <div id="warnweb" class="text-danger"></div>
                        </div>
                        <div class="col-md-4 mt-3">
                            <label for="mobile">Mobile</label>
                            <input type="text" class="form-control" id="mobile1"
                                   onchange="checkphone(this)" name="mobile"
                                    style="background-color: #2f516f;color: white;">
                            <div class="text-danger m-2" id="warnphone"></div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-6 mt-5">
                            <div class="row">
                                <div class="col-md-12 card-title">
                                    <h5 class="mb-0">Billing Address</h5>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mt-3">
                                    <div class="form-row">
                                        <label for="street">Street</label>
                                        <textarea class="form-control street" id="street1" name="street"
                                                  
                                                  style="background-color: #2f516f;color: white;"></textarea>
                                        <div class="invalid-feedback">Please provide a valid Street</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="city">City</label>
                                        <input type="text" class="form-control" id="city1"
                                               name="city"
                                               
                                               style="background-color: #2f516f;color: white;" placeholder="City">
                                        <div class="invalid-feedback">Please provide a valid City</div>
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="state">State</label>
                                        <select type="text" class="form-control" id="state1" name="state"
                                            required style="background-color: #2f516f; color: white;">
                                            <option value="" disabled selected>Choose</option>
                                            <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                            </option>
                                            <option value="Andhra Predhesh">Andhra Predhesh</option>
                                            <option value="Arunachal Predesh">Arunachal Predesh</option>
                                            <option value="Assam">Assam</option>
                                            <option value="Bihar">Bihar</option>
                                            <option value="Chandigarh">Chandigarh</option>
                                            <option value="Chhattisgarh">Chhattisgarh</option>
                                            <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                            <option value="Damn anad Diu">Damn and Diu</option>
                                            <option value="Delhi">Delhi</option>
                                            <option value="Goa">Goa</option>
                                            <option value="Gujarat">Gujarat</option>
                                            <option value="Haryana">Haryana</option>
                                            <option value="Himachal Predesh">Himachal Predesh</option>
                                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                            <option value="Jharkhand">Jharkhand</option>
                                            <option value="Karnataka">Karnataka</option>
                                            <option value="Kerala">Kerala</option>
                                            <option value="Ladakh">Ladakh</option>
                                            <option value="Lakshadweep">Lakshadweep</option>
                                            <option value="Madhya Predesh">Madhya Predesh</option>
                                            <option value="Maharashtra">Maharashtra</option>
                                            <option value="Manipur">Manipur</option>
                                            <option value="Meghalaya">Meghalaya</option>
                                            <option value="Mizoram">Mizoram</option>
                                            <option value="Nagaland">Nagaland</option>
                                            <option value="Odisha">Odisha</option>
                                            <option value="Puducherry">Puducherry</option>
                                            <option value="Punjab">Punjab</option>
                                            <option value="Rajasthan">Rajasthan</option>
                                            <option value="Sikkim">Sikkim</option>
                                            <option value="Tamil Nadu">Tamil Nadu</option>
                                            <option value="Telangana">Telangana</option>
                                            <option value="Tripura">Tripura</option>
                                            <option value="Uttar Predesh">Uttar Predesh</option>
                                            <option value="Uttarakhand">Uttarakhand</option>
                                            <option value="West Bengal">West Bengal</option>
                                            <option value="Other Territory">Other Territory</option>
                                        </select>
                                        <div class="invalid-feedback">Please provide a valid State</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="pincode">Pin Code</label>
                                        <input type="text" class="form-control" id="pincode1"
                                               name="pincode"
                                                style="background-color: #2f516f;color: white;"
                                               placeholder="PIN code">
                                        <div class="invalid-feedback">Please provide a valid Pin Code</div>
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="country">Country</label>
                                        <input type="text" class="form-control" id="country1"
                                               name="country"
                                                style="background-color: #2f516f;color: white;"
                                               placeholder="Country">
                                        <div class="invalid-feedback">Please provide a valid Country</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mt-5">
                            <div class="row">
                                <div class="col-md-12 d-flex">
                                    <h5>Shipping Address</h5>
                                    <input class="ml-4 mt-2 ml-2" type="checkbox" onclick="poppins1()" id="okay1"
                                           name="okay1">
                                    <label class="ml-2 mt-1 ml-2" for="okay">Same As Billing Address</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mt-3">
                                    <div class="form-row">
                                        <label for="shipstreet">Street</label>
                                        <textarea class="form-control" id="shipstreet1"
                                                  name="shipstreet"
                                                  
                                                  style="background-color: #2f516f;color: white;"></textarea>
                                        <div class="invalid-feedback">Please provide a valid Street</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shipcity">City</label>
                                        <input type="text" class="form-control" id="shipcity1"
                                               name="shipcity"
                                               
                                               style="background-color: #2f516f;color: white;" placeholder="City">
                                        <div class="invalid-feedback">Please provide a valid City</div>
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shipstate">State</label>
                                        <select type="text" class="form-control" id="shipstate1" name="shipstate"
                                             style="background-color: #2f516f; color: white;">
                                            <option id="shipst" selected>Choose</option>
                                            <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                            </option>
                                            <option value="Andhra Predhesh">Andhra Predhesh</option>
                                            <option value="Arunachal Predesh">Arunachal Predesh</option>
                                            <option value="Assam">Assam</option>
                                            <option value="Bihar">Bihar</option>
                                            <option value="Chandigarh">Chandigarh</option>
                                            <option value="Chhattisgarh">Chhattisgarh</option>
                                            <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                            <option value="Damn anad Diu">Damn and Diu</option>
                                            <option value="Delhi">Delhi</option>
                                            <option value="Goa">Goa</option>
                                            <option value="Gujarat">Gujarat</option>
                                            <option value="Haryana">Haryana</option>
                                            <option value="Himachal Predesh">Himachal Predesh</option>
                                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                            <option value="Jharkhand">Jharkhand</option>
                                            <option value="Karnataka">Karnataka</option>
                                            <option value="Kerala">Kerala</option>
                                            <option value="Ladakh">Ladakh</option>
                                            <option value="Lakshadweep">Lakshadweep</option>
                                            <option value="Madhya Predesh">Madhya Predesh</option>
                                            <option value="Maharashtra">Maharashtra</option>
                                            <option value="Manipur">Manipur</option>
                                            <option value="Meghalaya">Meghalaya</option>
                                            <option value="Mizoram">Mizoram</option>
                                            <option value="Nagaland">Nagaland</option>
                                            <option value="Odisha">Odisha</option>
                                            <option value="Puducherry">Puducherry</option>
                                            <option value="Punjab">Punjab</option>
                                            <option value="Rajasthan">Rajasthan</option>
                                            <option value="Sikkim">Sikkim</option>
                                            <option value="Tamil Nadu">Tamil Nadu</option>
                                            <option value="Telangana">Telangana</option>
                                            <option value="Tripura">Tripura</option>
                                            <option value="Uttar Predesh">Uttar Predesh</option>
                                            <option value="Uttarakhand">Uttarakhand</option>
                                            <option value="West Bengal">West Bengal</option>
                                            <option value="Other Territory">Other Territory</option>
                                        </select>
                                        <div class="invalid-feedback">Please provide a valid State</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shippincode">Pin Code</label>
                                        <input type="text" class="form-control" id="shippincode1"
                                               name="shippincode"
                                                style="background-color: #2f516f;color: white;"
                                               placeholder="PIN code">
                                        <div class="invalid-feedback">Please provide a valid Pin Code</div>
                                    </div>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <div class="form-row">
                                        <label for="shipcountry">Country</label>
                                        <input type="text" class="form-control" id="shipcountry1"
                                               name="shipcountry"
                                                style="background-color: #2f516f;color: white;"
                                               placeholder="Country">
                                        <div class="invalid-feedback">Please provide a valid Country</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required
                                       style="background-color: #2f516f;">
                                <label>Agree to terms and conditions</label>
                                <div class="invalid-feedback">You must agree before submitting.</div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4"></div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3" data-dismiss="modal"
                                    type="submit" id="customerSave">
                                Submit form
                            </button>
                        </div>
                        <div class="col-md-4"></div>
                    </div>
  
                </form>
            </div>
        </div>
    </div>
  </div>
  <div class="modal fade" id="newitem">
    <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background-color: #213b52;">
            <div class="modal-header">
                <h3 class="m-3">New Item</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card p-3 m-3">
                    <form action="" method="post"  autocomplete="off" id="modalItem">
  
                        <div class="row">
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-md-12 mx-0">
                                        <div class="row">
                                        <div class="col-md-6 mt-3">
                                            <label for="item_name"
                                                   style="color: white;">Name</label>
                                            <input type="text" name="name" class="form-control" id="item_name"
                                                      style="background-color: #2a4964; color: white;"
                                                     autocomplete="off" required>
                                        </div>
                                        <div class="col-md-6 mt-3">
                                            <label for="type"
                                                   style="color: white;">Type</label>
                                            <select name="type" class="form-control"  id="type"
                                                      style="background-color: #2a4964; color: white;"
                                                      required>
                                                      <option selected disabled value="">Choose...</option>
                                                    <option value="goods">Goods</option>
                                                <option value="services">Services</option></select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <div class="col-md-12 mx-0">
                                                    <div class="row">
                                                        <div class="col-md-6 mt-3">
                                                            <label for="unit" style="color: white;">Unit
                                                                </label>
                                                            <div class="d-flex">
                                                                <select class="custom-select" name="unit" id="unit"
                                                                        required
                                                                        style="background-color: #2a4964; color: white;">
                                                                        <option selected disabled value="">Choose...</option>
                                                                        {% for a in unit %}
                                                                        <option style="text-transform:Uppercase;">{{ a.unit_symbol}}-{{ a.name }}</option>
                                                                        {% endfor %}
                                                                        <option>BAG-BAGS</option>
                                                                        <option>BAL-BALE</option>
                                                                        <option>BDL-BUNDLES</option>
                                                                        <option>BKL-BUCKLES</option>
                                                                        <option>BOX-BOX</option>
                                                                        <option>BOU-BILLIONS OF UNITS</option>
                                                                        <option>BTL-BOTTLES</option>
                                                                        <option>BUN-BUNCHES</option>
                                                                        <option>CAN-CANS</option>
                                                                        <option>CBM-CUBIC METER</option>
                                                                        <option>CMS-CENTIMETER</option>
                                                                        <option>CCM-CUBIC CENTIMETER</option>
                                                                        <option>CTN-CARTONS</option>
                                                                        <option>DOZ-DOZEN</option>
                                                                        <option>DRM-DRUM</option>
                                                                        <option>GGR-GREAT GROSS</option>
                                                                        <option>GMS-GRAMS</option>
                                                                        <option>GRS-GROSS</option>
                                                                        <option>GYD-GROSS YARDS</option>
                                                                        <option>KGS-KILOGRAMS</option>
                                                                        <option>KLR-KILOLITER</option>
                                                                        <option>KME-KILOMETRE</option>
                                                                        <option>MTS Metric ton</option>
                                                                        <option>MLT-MILLILITRE</option>
                                                                        <option>MTR-METERS</option>
                                                                        <option>NOS-NUMBER</option>
                                                                        <option>PAC-PACKS</option>
                                                                        <option>PCS-PIECES</option>
                                                                        <option>PRS-PAIRS</option>
                                                                        <option>QTL-QUINTAL</option>
                                                                        <option>ROL-ROLLS</option>
                                                                        <option>SQF-SQUARE FEET</option>
                                                                        <option>SET-SETS</option>
                                                                        <option>SQM-SQUARE METERS</option>
                                                                        <option>SQY-SQUARE YARDS</option>
                                                                        <option>TBS-TABLETS</option>
                                                                        <option>TGM-TEN GROSS</option>
                                                                        <option>THD-THOUSANDS</option>
                                                                        <option>TON-TONNES</option>
                                                                        <option>TUB-TUBES</option>
                                                                        <option>UGS-US GALLONS</option>
                                                                        <option>UNT-UNITS</option>
                                                                        <option>YDS-YARDS</option>
                                        
                                                                   
                                                                </select>
                                                                <!-- <a href="{% url 'add_unit' %}">
                                                                    <button type="button"
                                                                            class="btn btn-outline-secondary ml-1">+
                                                                    </button>
                                                                </a> -->
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 mt-3">
                                                            <label for="hsn" style="color: white;">HSN
                                                                Code</label>
                                                        <input type="text" name="hsn" class="form-control" id="hsn"
                                                                   style="background-color: #2a4964; color: white;"
                                                                  
                                                                   placeholder="Enter a valid HSN code" required>
                                                          
                                                        </div>
                                                       
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6 mt-3">
                                                           
                                                        </div>
                                                       
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-3 mt-3">
                                                            <label for="validationCustom05" name style="color: white;">Tax Reference
                                                                </label>
                                                         
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-check mt-1">
                                                               
                                                                    <input class="form-check-input" name="taxref" type="checkbox" id="inclusive" 
                                                                         value="taxable"  onchange="ShowHideDivi(inclusive)" >taxable
                                                                    <label style="color: white;" for="inclusive">
                                                                        </label>
                                                              
                                                            </div>
                                                        </div>
                                                        <div class="form-check mt-1">
                                                            <input class="form-check-input" name="taxref" type="checkbox"
                                                                   value="non taxable" 
                                                                   id="check">
                                                            <label style="color: white;">non taxable</label>
                                                        </div>
                                                    </div>
                                </div>
                                </div>
                                    <div class="row"  id="intrastateFiled" style="display: none;">
                                        <div class="col-md-6 mt-3">
                                            <label for="validationCustom05"
                                                   style="color: white;">Intra State Tax Rate</label>
                                                   <select name="intra_st" class="form-control" 
                                                   style="background-color: #2a4964; color: white;"
                                                   id="validationCustom05" >
                                                  
                                                   <option value=0>GST 0 (0%)</option>
                                                   <option value=5>GST 5 (5%)</option>
                                                   <option value=12>GST 12 (12%)</option>
                                                   <option value=18>GST 18 (18%)</option>
                                                   <option value=28>GST 28 (28%)</option>
                                                   
                                        </select>
                                        <br>
                                            <label for="validationCustom05"
                                                   style="color: white;">Inter State Tax Rate</label>
                                            <select name="inter_st" class="form-control" 
                                                      style="background-color: #2a4964; color: white;"
                                                      id="validationCustom05" >
                                                     
                                                      <option value=0>IGST 0 (0%)</option>
                                                   <option value=5>IGST 5 (5%)</option>
                                                   <option value=12>IGST 12 (12%)</option>
                                                   <option value=18>IGST 18 (18%)</option>
                                                   <option value=28>IGST 28 (28%)</option>
                                                   
                                        </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 mt-3">
                                            <label for="validationCustom01"
                                                   style="color: white;">Purchase Price</label>
                                                <div class="row">
                                                   <div >
                                                   <input type="text" class="form-control" value="INR"
                                                    style="margin-left:20px;width:60px;background-color: #2a4960; color: white;"></div>
                                                   <div >
                                                   <input type="number" name="pcost" class="form-control" 
                                                   id="purprice" style="width:540px;background-color: #2a4964; color: white; width:200%"
                                                   value="0"
                                                   >
                                                   </div>
                                                </div>
  
                                        </div>
                                        <div class="col-md-6 mt-3">
                                            <label for="validationCustom01"
                                                   style="color: white;">Sales Price</label>
                                                   <div class="row">
                                                    <div >
                                                        <input type="text" class="form-control" value="INR"
                                                         style="margin-left:20px;width:60px;background-color: #2a4960; color: white;"></div>
                                                        <div >
                                                    <div >
                                                   <input type="text" name="salesprice" class="form-control"
                                                   id="saleprice" style="width:540px;background-color: #2a4964; color: white; width:200%"
                                                   value="0"
                                                   >
                                                    </div>
                                                </div>
  
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 mx-0">
                                        <div class="row">
                                            <div class="col-md-6 mt-3">
                                                <label for="validationCustom01"
                                                       style="color: white;">Account</label>
                                                       <select name="pur_account" class="form-control" 
                                                       style="background-color: #2a4964; color: white;"
                                                       id="pur_account" >
                                                       <option >Cost of Goods Sold</option>
                                                       {% for a in acc1 %}
                                                       <option value="{{a.name}}">{{ a.name }}</option>
                                                       {% endfor %}</select>
                                            </div>
                                            <div class="col-md-6 mt-3">
                                                <label for="validationCustom01"
                                                       style="color: white;">Account</label>
                                                <select name="sale_account" class="form-control" 
                                                          style="background-color: #2a4964; color: white;"
                                                          id="sale_account" >
                                                          <option >Sales</option>
                                                       {% for a in acc2 %}
                                                       <option value="{{a.name}}">{{ a.name }}</option>
                                                       {% endfor %}</select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12 mx-0">
                                                <div class="row">
                                                    <div class="col-md-6 mt-3">
                                                        <label for="validationCustom01"
                                                               style="color: white;">Description</label>
                                                               <textarea class="form-control" name="pur_desc"
                                                               id="pur_desc" 
                                                               style="background-color: #2a4964; color: white;"
                                                               ></textarea>  
                                                    </div>
                                                    <div class="col-md-6 mt-3">
                                                        <label for="validationCustom01"
                                                               style="color: white;">Description</label>
                                                               <textarea class="form-control" name="sale_desc"
                                                               id="sale_desc"
                                                               style="background-color: #2a4964; color: white;"
                                                               ></textarea>
                                                    </div>
                                                </div>
                                     
                                    
                                    <div class="row">
                                        <div class="col-md-12 mx-0">
                                           <br>
                                            <div class="row" >
                                               
                                               
                                  
                                                <div class="col-md-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" onclick="ShowHideDiv(this)" type="checkbox"  id="track">
                                                        <label class="form-check-label" for="track" >
                                                          Track Inventory
                                                        </label>
                                                      </div>
                                                     
                                                </div>
                                            
                                            </div>
  
                                            <div class="row" id="inventorytrack" style="display: none">
                                                <div class="col-md-6 mt-3">
                                                    <label for="validationCustom01"
                                                           style="color: white;">Inventory Account</label>
                                                           <select name="invacc" class="form-control" 
                                                              style="background-color: #2a4964; color: white;"
                                                              >
                                                           <option selected disabled value="" >Choose...</option>
                                                           <option value="Inventory Assets">Inventory Assets</option>
                                                       
                                                </select>
                                                </div>
                                                <div class="col-md-3 mt-3">
                                                    <label for="validationCustom01"
                                                           style="color: white;">Stock on hand</label>
                                                           <input type="number" name="stock" class="form-control"
                                                           style="background-color: #2a4964; color: white;"
                                                           value="0"
                                                           >
                                                </div>
                                                <!-- reshna added -->
                                                <div class="col-md-3 mt-3">
                                                    <label for="validationCustom01"
                                                           style="color: white;">Stock Rate per Unit</label>
                                                           <input type="number" name="stock_rate" id="stock_rate" class="form-control"
                                                           style="background-color: #2a4964; color: white;"
                                                           value="0"
                                                           >
                                                </div>
                                                <!-- end -->
                                            </div>
                                           
  
                                        
                           
                                            <div class="row">
                                                <div class="col-md-6 mt-3">
                                                   
                                                </div>
                                               
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3 mt-3">
                                                    <label for="validationCustom05" name style="color: white;">Active/Inactive
                                                        </label>
                                                 
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" value="Active" type="radio" name="status" id="flexRadioDefault1" checked>
                                                        <label class="form-check-label" for="flexRadioDefault1">
                                                          Active
                                                        </label>
                                                      </div>
                                                     
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" value="Inactive" type="radio" name="status" id="flexRadioDefault2" >
                                                    <label class="form-check-label" for="flexRadioDefault2">
                                                      Inactive
                                                    </label>
                                                  </div>
                                                  <!-- <div class="col-md-3">
                                                    <input type="date" name="itmdate" id="date3" class="form-control">
                                                </div> -->
                                            </div>
                                        </div>
                                        </div>
                                   
                                        <div class="row">
                                            <div class="col-md-4"></div>
                                            <div class="col-md-4">
                                            <button class="btn btn-outline-info rounded-pill w-100 text-light" data-dismiss="modal" type="submit" id="itemSave">SUBMIT</button>
                                        
                                        <div class="col-md-4"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                  </div>
          </div>
      </div>
  </div> 
  </div>  
  <div class="modal fade" id="unit">
    <div class="modal-dialog">
        <div class="modal-content" style="background-color: #213b52;">
            <div class="modal-header">
                <h5 class="m-3">Unit Create</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card p-3 m-3">
                    <form method="post" action="{% url 'createunit_rbill'%}" autocomplete="off">
                        {% csrf_token %}
                        <div class="row mt-2 mb-2">
                            <div class="col-md-6">
                                <label for="acctyp">Unit Symbol</label>
                                <input type="text" name="usymbol" id="select1" class="custom-select-md form-control w-100">        
                            </div>
                            <div class="col-md-6">
                                <label for="name">Name</label>
                                <input name="uname" id="name" class="custom-select-md form-control w-100">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4"></div>
                            <div class="col-md-4 mt-4 mb-4">
                                <button type="submit" class="btn btn-outline-info rounded-pill w-100">Create</button>
                            </div>
                            <div class="col-md-4"></div>
                        </div>
                    </form>
                </div>
            </div>
        </div>   
    </div>
</div> 
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="{% static 'assets/plugins/select2/js/select2.min.js' %}"></script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

   <script>
    // Get the paid_amount input and the checkbox
    const paidAmountInpu = document.getElementById('paid_amount');
    const checkbox = document.getElementById('invalidCheck');

    // Function to check the checkbox if paid_amount is not equal to zero
    function checkCheckbox() {
        const paidAmount = parseFloat(paidAmountInpu.value);
        if (paidAmount !== 0) {
            checkbox.checked = true;
        } else {
            checkbox.checked = false;
            
        }
    }

    // Call the function initially to check based on the initial value
    checkCheckbox();

    // Listen for changes in the paid_amount input
    paidAmountInpu.addEventListener('input', checkCheckbox);

   </script>
    
    <script type="text/javascript">
        $(document).on('change','#bill_code_number', function() {
            ord = '{{rbill.billno}}'
            sale_ord = "{{sale_list}}"
            ord_value = $('#bill_code_number').val();
            if(sale_ord === '' ){
                document.getElementById('dangerdiv').style.display = 'none';
    
            }
            else{
                if(ord_value != ord){
                    alert('The Next Number is '+ ord)
                    document.getElementById('bill_code_number').value = ord;
                }else{
                    document.getElementById('dangerdiv').style.display = 'none';
                }
            }
            var sale_list = "{{sale_list}}";
            salelist = sale_list.split(",");
            for(let i=0; i<salelist.length; i++){
                if (ord_value == salelist[i]){
                    alert('Sale Order Number already in use.')
                    document.getElementById('dangerdiv').style.display = 'none';
                    document.getElementById('bill_code_number').value = ''
                }
            }
        })
    </script>

<script>
    // Get references to the elements
    const grandTotalElement = document.getElementById('grandtotal');
    const paidCheckbo = document.getElementById('invalidCheck');
    const paidAmountElement = document.getElementById('paid_amount');
    const balanceDueElement = document.getElementById('bal_due');

    // Function to calculate the balance due
    function calculateBalance() {
        const grandTotal = parseFloat(grandTotalElement.value) || 0;
        const paidAmount = parseFloat(paidAmountElement.value) ;
        const isPaid = paidCheckbox.checked;

        if (isPaid) {
            const balanceDue = grandTotal - paidAmount;
            balanceDueElement.value = balanceDue.toFixed(2); // Update the balance due
            paidAmountElement.value = paidAmount.toFixed()
        } else {
            // If not paid, balance due should be the same as the grand total
            balanceDueElement.value = grandTotal.toFixed(2);
            paidAmountElement.value = paidAmount.toFixed()
        }
    }

    // Event listeners to trigger calculation when values change
    grandTotalElement.addEventListener('input', calculateBalance);
    paidCheckbo.addEventListener('change', calculateBalance);
    paidAmountElement.addEventListener('input', calculateBalance);

    // Initial calculation when the page loads
    calculateBalance();
</script>



  <script>
    // Get references to the relevant HTML elements
const grandTotalInput = document.getElementById("grandtotal");
const paidCheckbox = document.getElementById("invalidCheck");
const paidAmountInput = document.getElementById("paid_amount");
const balanceDueInput = document.getElementById("bal_due");

// Add an event listener to the checkbox
paidCheckbox.addEventListener("change", function () {
    // Check if the checkbox is checked
    if (paidCheckbox.checked) {
        // Enable the paid amount input field
        paidAmountInput.removeAttribute("readonly");
    } else {
        // Disable the paid amount input field
        paidAmountInput.setAttribute("readonly", true);
    }

    // Calculate the balance due and update the input field
    calculateBalanceDue();
});

// Add an event listener to the paid amount input
paidAmountInput.addEventListener("input", function () {
    // Check the box if the paid amount is not zero
    paidCheckbox.checked = parseFloat(paidAmountInput.value) !== 0;

    // Calculate the balance due and update the input field
    calculateBalanceDue();
});

// Add an event listener to the grand total input

// Function to calculate and update the balance due
function calculateBalanceDue() {
    // Parse the values of grand total and paid amount as numbers
    const grandTotal = parseFloat(grandTotalInput.value) ;
    const paidAmount = parseFloat(paidAmountInput.value) ;

    // Calculate the balance due
    const balanceDue = grandTotal - paidAmount;

    // Update the balance due input field
    balanceDueInput.value = balanceDue;
    
    // Check if the paid amount exceeds the grand total and show an alert if it does
    if (paidAmount > grandTotal) {
        alert("Paid amount cannot exceed the grand total.");
    
        paidCheckbox.checked = true; // Check the checkbox
        paidAmountInput.value = '{{rbill.paid_amount}}';
        
    }
}

// Initialize the input state based on the checkbox
if (!paidCheckbox.checked) {
    paidAmountInput.setAttribute("readonly", true);
}

// Initial call to set the balance due on page load
calculateBalanceDue();

  </script>


    <script>
        
    // var enteredVName = "";
    $(document).on("click","#vendorSave",function(){
    // var firstNameValue = $("#fname").val();
    // var lastNameValue = $("#lname").val();
    
    // enteredVName = firstNameValue + " " + lastNameValue;
        $.ajax({
    
    
            type : 'POST',
            url:"{% url 'createvendor_rbill' %}",
        
            data:{
                
                title : $("#title").val(),
                firstname : $("#fname").val(),
                lastname : $("#lname").val(),
                company_name : $("#company").val(),
                email : $("#email").val(),
                website :$("#wsite").val(),
                mobile :$("#mobile").val(),
                gsttype :$("#gsttyp").val(),
                gstin :$("#gstin").val(),
                panno : $("#panno").val(),
                sourceofsupply :$("#ssupply").val(),
                currency : $("#currency").val(),
                openingbalance : $("#openingbalance").val(),
                paymentterms : $("#paymentterms").val(),
                street : $("#street").val(),
                city : $("#city").val(),
                state : $("#state").val(),
                pincode : $("#pincode").val(),
                country : $("#country").val(),
                shipstreet : $("#shipstreet").val(),
                shipcity : $("#shipcity").val(),
                shipstate : $("#plosu").val(),
                shippincode : $("#shippincode").val(),
                shipcountry : $("#shipcountry").val(),
                csrfmiddlewaretoken: '{{ csrf_token }}'
                
            },
            
            success: function(response) {
                document.getElementById("modalVendor").reset();
                reloadVendor();
            },
                    
        });
    
        
        
    });

// function reloadVendor() {

// $.ajax({
//     url: "{% url 'vendor_dropdown_rbill' %}",
//     type: "GET",
//     dataType: "json",
//     data: $(this).serialize(),
//     csrfmiddlewaretoken: '{{ csrf_token }}',

//     success: function(data) {
//         var dropdown = $('#vendor');
//         dropdown.empty();
//     dropdown.append(`<option selected>Select Vendor</option>`);
//         $.each(data, function(key, value) {
//             console.log(value)
//             dropdown.append($('<option></option>').attr('value', key).text(value[1] + " " +value[2] + " "+ value[3]).val(value[0] + " " +value[2] + " "+ value[3]));
//         });
//     },
//     error: function(xhr, status, error) {
//     console.error(xhr.responseText);
//     }
// });
// }

function reloadVendor() {

    $.ajax({
        url: "{% url 'vendor_dropdown_rbill' %}",
        type: "GET",
        dataType: "json",
        data: $(this).serialize(),
        csrfmiddlewaretoken: '{{ csrf_token }}',

        success: function(data) {
            var dropdown = $('#vendor');
            dropdown.empty();
            dropdown.append(`<option selected>Select Vendor</option>`);
            $.each(data, function(key, value) {
                
                // dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
                dropdown.append($('<option></option>').attr('value', key).text(value[1] + " " +value[2] + " "+ value[3]).val(value[0] + " " +value[2] + " "+ value[3]));
                
            });
    //         if (enteredVName) {
    //         dropdown.find('option').filter(function() {
    //         return $(this).text() === enteredVName;
    //     }).prop('selected', true);
        
    //   }
//     if (enteredVName) {
//     dropdown.find('option:contains("' + enteredVName + '")').prop('selected', true);
//     // Trigger the change event to load the selected vendor's details
//     dropdown.trigger('change');
// }

    
        },
        error: function(xhr, status, error) {
        console.error(xhr.responseText);
        }
    });

}
$(document).ready(function() {
    $('#vendor_det').change(function() {
        // var selectedValue = $("#vendor").val();
        // // var values = selectedValue.split(' '); // Split by space
        // var vendorid = values[0];
        // // The rest of the values will be the name (firstname and lastname)
        // var name = values.slice(1).join(' ');

        // Send the vendorid to the server
        $.ajax({
            url: "{% url 'get_vendordet' %}", 
            data: { 
                // id: vendorid,  // Pass the vendorid to the server
                // csrfmiddlewaretoken: '{{ csrf_token }}' 
                id: $('#vendor_det').val(),
                csrfmiddlewaretoken: '{{ csrf_token }}',
            },
            type : 'POST',
            success: function(data) {
                // Update your UI with the data
                $("#email_row").removeClass('d-none');
                $("#email_row").addClass('d-flex');
               
                $("#gst_trt_row").removeClass('d-none');
                $("#gst_trt_row").addClass('d-flex');
                $("#addres_row").removeClass('d-none');
                $("#addres_row").addClass('d-flex');
                $('#email_inp').val(" " + data.email);
                $('#gst_trt_inp').val(" " + data.gsttype);
                $('#addres').val(" " +  data.street + '\n' + data.city + '\n' + data.state + '\n' + data.country  + '\n' + data.pincode) ;
                var gstinRow = document.getElementById('gstin_row');
                var gstNoInput = document.getElementById('gstno');
                if(data.gstno) {
                    gstinRow.style.display = 'block'; // Show GSTIN field
                    gstNoInput.value = data.gstno; // Set GST number
                } else {
                    gstinRow.style.display = 'none'; // Hide GSTIN field
                    gstNoInput.value = ''; // Clear GST number
                }
            }
           
        });
    });
    $('#vendor_det').trigger('change');
});
</script>
    <script>
    
    $(document).on("click","#repeatsave",function(){

        $.ajax({
    
    
            type : 'POST',
            url:"{% url 'create_repeatevery' %}",
        
            data:{
                
                repeats : $("#repeat_input").val(),
             
                csrfmiddlewaretoken: '{{ csrf_token }}'
                
            },
            
            success: function(response) {
                console.log("AJAX Success - Response Data:", response);
                document.getElementById("modalrepeat").reset();
                reloadrepeat();
            },
                    
        });
    
        
        
    });



function reloadrepeat() {
    console.log("reloadrepeat Function Called");
    $.ajax({
        url: "{% url 'repeat_dropdown_rbill' %}",
        type: "GET",
        dataType: "json",
        data: $(this).serialize(),
        csrfmiddlewaretoken: '{{ csrf_token }}',

        success: function(data) {
            console.log("AJAX Success - Dropdown Data:", data);
            var dropdown = $('#repeat');
            dropdown.empty()
            dropdown.append(`<option selected value="1 Week">Week</option>
                                        <option value="2 Weeks">2 Weeks</option>
                                        <option value="1 Month">Month</option>
                                        <option value="2 Months">2 Months</option>
                                        <option value="3 Months">3 Months</option>
                                        <option value="6 Months">6 Months</option>
                                        <option value="1 Year">Years</option>
                                        <option value="2 Years">2 Years</option>
                                        <option value="3 Years">3 Years</option>
                                        <option value="6 Years">6 Years</option>`);
            $.each(data, function(key, value) {
          
            dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
                
            });
 

    
        },
        error: function(xhr, status, error) {
        console.error(xhr.responseText);
        }
    });

}

$(document).on("click", "#customerSave", function(){
            
            $.ajax({
    
                type : 'POST',
                url:"{% url 'createcustomer_rbill' %}",

                data:{
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                    title : $('#title1').val(),
                    firstname : $('#firstname').val(),
                    lastname : $('#lastname').val(),
                    company : $("#company1").val(),
                    location : $("#location").val(),
                    openbalance : $("#openbalance").val(),
                    email : $("#email1").val(),
                    website :$("#website1").val(),
                    mobile :$("#mobile1").val(),
                    street : $("#street1").val(),
                    city : $("#city1").val(),
                    state : $("#state1").val(),
                    country : $("#country1").val(),
                    pincode : $("#pincode1").val(),
                    shipstreet : $("#shipstreet1").val(),
                    shipcity : $("#shipcity1").val(),
                    shipstate : $("#shipstate1").val(),
                    shipcountry : $("#shipcountry1").val(),
                    shippincode : $("#shippincode1").val(),
                    gsttype :$("#gsttype").val(),
                    gstin :$("#gstin1").val(),
                    panno :$("#panno1").val(),

                  
                    
                    
                },
                
                success: function(response) {
                    console.log("success")
                    document.getElementById("modalCustomer").reset();
                    reloadCustomer();
                },
            });        
        });


        function reloadCustomer() {

            $.ajax({
                url: "{% url 'cust_dropdown_rbill' %}",
                type: "GET",
                dataType: "json",
                data: $(this).serialize(),
                csrfmiddlewaretoken: '{{ csrf_token }}',

                success: function(data) {
                    var dropdown = $('#customer');
                    dropdown.empty();
                    dropdown.append(`<option selected>Select Customer</option>`);
                    $.each(data, function(key, value) {
                        console.log(value)
                        dropdown.append($('<option></option>').attr('value', key).text(value[1] + " " +value[2] + " "+ value[3]).val(value[0] + " " +value[2] + " "+ value[3]));
                    });
                },
                error: function(xhr, status, error) {
                console.error(xhr.responseText);
                }
            });
        }
    $(document).ready(function() {
    $('#customer').change(function() {

        $.ajax({
            url: "{% url 'get_customerdet' %}", 
            data: { 
            
                id: $('#customer').val(),
                csrfmiddlewaretoken: '{{ csrf_token }}',
            },
            type : 'POST',
            success: function(data) {
              
                $("#email_row1").removeClass('d-none');
                $("#email_row1").addClass('d-flex');
                $("#gstin_row1").removeClass('d-none');
                $("#gstin_row1").addClass('d-flex');
                $("#gst_trt_row1").removeClass('d-none');
                $("#gst_trt_row1").addClass('d-flex');
                $('#cust_email').val(" " + data.email);
                $('#gstn').val(" " + data.gstno);
                $('#gsttype').val(" " + data.gsttype);
                document.getElementById('plosu').value = data.shipstate;

                document.getElementById('bname').value = data.street + '\n' + data.city + '\n' + data.state + '\n' + data.country  + '\n' + data.pincode ;
                if(data.gstno){
                    document.getElementById('gstnodiv').style.display = 'block';
                    document.getElementById('gstn').value = data.gstno;
                }else{
                    document.getElementById('gstnodiv').style.display = 'none';
                    document.getElementById('gstn').value = '';
                }
                var compstate = document.getElementById("cmpstate").value;
                if (data.shipstate == compstate ) {
                    document.getElementById('cgst1').style.display = 'flex';
                    document.getElementById('sgst1').style.display = 'flex';
                    document.getElementById('igst1').style.display = 'none'; 

                } else {
                    document.getElementById('cgst1').style.display = 'none';
                    document.getElementById('sgst1').style.display = 'none';
                    document.getElementById('igst1').style.display = 'flex';

                            }
            }
            
        });
     
    });
    $('#customer').trigger('change');
});

$(document).on("click","#savecredit",function(){

$.ajax({


    type : 'POST',
    url:"{% url 'credit_period_rbill2' %}",

    data:{
        
        newperiod : $("#period").val(),
     
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
    },
    
    success: function(response) {
        console.log("AJAX Success - Response Data:", response);
        document.getElementById("credit").reset();
        reloadcredit();
    },
            
});



});



function reloadcredit() {
console.log("reloadrepeat Function Called");
$.ajax({
url: "{% url 'credit_dropdown_rbill' %}",
type: "GET",
dataType: "json",
data: $(this).serialize(),
csrfmiddlewaretoken: '{{ csrf_token }}',

success: function(data) {
    console.log("AJAX Success - Dropdown Data:", data);
    var dropdown = $('#termadd2');
    dropdown.empty()
    dropdown.append(`<option selected id="trmopt"></option>
                     <option value="0">Due on Receipt</option>
                    <option value="15">NET 15</option>
                    <option value="30">NET 30</option>
                    <option value="60">NET 60</option>
                               `);
    $.each(data, function(key, value) {
    var netValue = "NET " + value;
        dropdown.append($('<option></option>').attr('value', key).text(netValue).val(value));
    // dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
        
    });



},
error: function(xhr, status, error) {
console.error(xhr.responseText);
}
});

}
$(document).ready(function() {
    $('#termadd2').on('change', function() {
                select = $('#termadd2').val();
                $.ajax({
                        type: "GET",
                        url: "{% url 'getperiod_rbill' %}",
                        data: {
                        id: select
                    }
                }).done(function(response) {
                    var json_data = JSON.parse(response);
                    for (key in json_data) {
                    document.getElementById('duedat').value = json_data[key]['newdate'];
                    }
                }).fail(function() { });
            });
});


        // $('#date').val(new Date().toJSON().slice(0,10));
        $('#date3').val(new Date().toJSON().slice(0,10));




     
        function toggleDateInput() {
            var checkbox = document.getElementById("never-expire-checkbox");
            var dateInput = document.getElementById("duedat");
            
            if (checkbox.checked) {
                dateInput.disabled = true;
            } else {
                dateInput.disabled = false;
            }
        }
    </script>

    
<script>
$(document).ready(function() {
  // Function to handle the initial display based on the existing value
  var initialMethod = $('#pay_method').val();
  if (initialMethod === 'cheque') {
    $('#chequediv').show();
  } else if (initialMethod === 'upi') {
    $('#upidiv').show();
  } else if (initialMethod !== 'cash') {
    $('#bnkdiv').show();
    // Assuming you want to make an AJAX call only when the initial value is a bank
    $.ajax({
      type: "GET",
      url: "{% url 'bankdata' %}",
      data: {
        id: initialMethod,
      },
      success: function(response) {
        data = response.bank;
        document.getElementById('cheque_id').value = null;
        document.getElementById('upi_id').value = null;
        document.getElementById("bnk_id").value = data;
      }
    });
  }

  // Function to handle changes in the select dropdown
  $("#pay_method").change(function() {
    var x = $('#pay_method').val();
    if (x === 'cheque') {
      $('#chequediv').show();
      $('#upidiv').hide();
      $('#bnkdiv').hide();
      document.getElementById('upi_id').value = null;
      document.getElementById('bnk_id').value = null;
    } else if (x === 'upi') {
      $('#upidiv').show();
      $('#chequediv').hide();
      $('#bnkdiv').hide();
      document.getElementById('cheque_id').value = null;
      document.getElementById('bnk_id').value = null;
    } else if (x !== 'cash') {
      $('#bnkdiv').show();
      $('#chequediv').hide();
      $('#upidiv').hide();
      document.getElementById('cheque_id').value = null;
      document.getElementById('upi_id').value = null;
      // Assuming you want to make an AJAX call only when the value is a bank
      $.ajax({
        type: "GET",
        url: "{% url 'bankdata' %}",
        data: {
          id: x,
        },
        success: function(response) {
          data = response.bank;
          document.getElementById("bnk_id").value = data;
        }
      });
    } else {
      $('#chequediv').hide();
      $('#upidiv').hide();
      $('#bnkdiv').hide();
      document.getElementById('cheque_id').value = null;
      document.getElementById('upi_id').value = null;
      document.getElementById('bnk_id').value = null;
    }
  });
});

</script>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
       
        function poppins() {
            var chkbtn = document.getElementById('okay');
            if (chkbtn.checked == true) {
                document.getElementById('shipstreet').value = document.getElementById('street').value;
                document.getElementById('shipcity').value = document.getElementById('city').value;
                document.getElementById('shippincode').value = document.getElementById('pincode').value;
                document.getElementById('shipcountry').value = document.getElementById('country').value;
                document.getElementById('plosu').value = document.getElementById('state').value;
            } else {
                document.getElementById('shipstreet').value = '';
                document.getElementById('shipcity').value = '';
                document.getElementById('plosu').value = '';
                document.getElementById('shippincode').value = '';
                document.getElementById('shipcountry').value = '';
            }
        }
        function poppins1() {
            var chkbtn = document.getElementById('okay1');
            if (chkbtn.checked == true) {
                document.getElementById('shipstreet1').value = document.getElementById('street1').value;
                document.getElementById('shipcity1').value = document.getElementById('city1').value;
                document.getElementById('shippincode1').value = document.getElementById('pincode1').value;
                document.getElementById('shipcountry1').value = document.getElementById('country1').value;
                document.getElementById('shipstate1').value = document.getElementById('state1').value;
                document.getElementById('shipst1').innerHTML = document.getElementById('state1').value;
            } else {
                document.getElementById('shipstreet1').value = '';
                document.getElementById('shipcity1').value = '';
                document.getElementById('shipstate1').value = '';
                document.getElementById('shippincode1').value = '';
                document.getElementById('shipcountry1').value = '';
            }
        }
  
 
    </script>

    <script>
        function hidinput(divId, element) {
            if (element.value == 'unregistered Business' || element.value == 'Consumer' || element.value == 'Overseas') {
                document.getElementById(divId).style.display = 'none';
            } else {
                document.getElementById(divId).style.display = 'block';
            }
        }

        function hidinput1(divId, element) {
            if (element.value == 'Unregistered Business' || element.value == 'Consumer' || element.value == 'Overseas') {
                document.getElementById(divId).style.display = 'none';
            } else {
                document.getElementById(divId).style.display = 'block';
            }
        }

        function checkgst(element) {
            var gstinput = element.value;
            var gstregexp = "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}";
            if (gstinput.match(gstregexp)) {
                document.getElementById('warngst').innerHTML = '';
            } else {
                document.getElementById('warngst').innerHTML = 'Please provide a valid GSTIN';
                alert('Please provide a valid GSTIN');
            }
        }

        // function checkgst1(element) {
        //     var gstinput1 = element.value;
        //     var gstregexp1 = "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}";
        //     if (gstinput1.match(gstregexp1)) {
        //         document.getElementById('warngst1').innerHTML = '';
        //     } else {
        //         document.getElementById('warngst1').innerHTML = 'Please provide a valid GSTIN';
        //         alert('Please provide a valid GSTIN');
        //     }
        // }

        function checkpan(element) {
            var paninput = element.value;
            var panregexp = ["[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}"]
            if (paninput.match(panregexp)) {
                document.getElementById('warnpan').innerHTML = '';
            } else {
                document.getElementById('warnpan').innerHTML = 'Please provide a valid PAN Number';
                alert('Please provide a valid PAN Number')
            }
        }

        function checkweb(element) {
            var webinput = element.value;
            var webregexp = "www."
            if (webinput.startsWith(webregexp)) {
                document.getElementById('warnweb').innerHTML = '';
            } else {
                document.getElementById('warnweb').innerHTML = 'Please provide a valid Website Address';
                alert('Please provide a valid Website Address')
            }
        }

        function checkphone(element) {
            var phoneinput = element.value;
            var phoneregexp = "[0-9]{10}";
            if (phoneinput.match(phoneregexp)) {
                document.getElementById('warnphone').innerHTML = '';
            } else {
                document.getElementById('warnphone').innerHTML = 'Please provide a valid Phone Number';
                alert('Please provide a valid Phone Number')
            }
        }
    </script>
    <script>
        (function () {
            'use strict';
            window.addEventListener('load', function () {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                var forms = document.getElementsByClassName('needs-validation');
                // Loop over them and prevent submission
                var validation = Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
        function showMessage(input) {
            const gstin1 = input.value;

            if (gstin1.length === 15) {
                // document.getElementById("message").textContent = "Please wait, validating GSTIN format...";
                setTimeout(() => checkgst(input), 500);  // Wait for a second and then validate GSTIN
            } else {
                document.getElementById("message").textContent = "";
            }
        }
$(document).ready(function () {
  
  var bc = document.getElementById("plosur").value;
  var compstate = document.getElementById("plosu").value;
  if (bc == compstate ) {
      document.getElementById('cgst1').style.display = 'flex';
      document.getElementById('sgst1').style.display = 'flex';
      document.getElementById('igst1').style.display = 'none'; 
      $(".intra_tax").removeClass("d-none");
      $(".intra_tax").addClass("d-flex");

      $(".inter_tax").removeClass("d-flex");
      $(".inter_tax").addClass("d-none");

  } else {
      document.getElementById('cgst1').style.display = 'none';
      document.getElementById('sgst1').style.display = 'none';
      document.getElementById('igst1').style.display = 'flex';

      $(".inter_tax").removeClass("d-none");
      $(".inter_tax").addClass("d-flex");

      $(".intra_tax").removeClass("d-flex");
      $(".intra_tax").addClass("d-none");
  }
});
$(document).ready(function () {

  
var $select1 = $('#plosur'),
$select2 = $('#tax1'),
$select3 = $('#tax2'),
$select4 = $('#tax3'),
$select5 = $('#tax4'),
$options = $select2.find('option'),
$options1 = $select3.find('option'),
$options2 = $select4.find('option'),
$options3 = $select5.find('option');
if ($options1.value == '{{ cmp1.state }}') {
    $options1.text = "{{ cmp1.state }}"
}
$select1.on('change', function() {
    if (this.value == "{{ cmp1.state }}") {
        $select2.html($options.filter('[text="' + this.value + '"]'));
        $select3.html($options1.filter('[text="' + this.value + '"]'));
        $select4.html($options2.filter('[text="' + this.value + '"]'));
        $select5.html($options3.filter('[text="' + this.value + '"]'));
    } 
    else {
        $select2.html($options.filter('[text="' + " " + '"]'));
        $select3.html($options1.filter('[text="' + " " + '"]'));
        $select4.html($options2.filter('[text="' + " " + '"]'));
        $select5.html($options3.filter('[text="' + " " + '"]'));
    }
}) .trigger('change');
})

$(document).ready(function(){
$("#tab_logic").on('click', '.demo', function() {
    var currentRow = $(this).closest("tr");
    var col1=currentRow.find("td:eq(2)").text();
    alert(col1);
});
});

$(document).ready(function(){
 $('#add').click(function(){
    var table = document.getElementById("items-table-body");
               var roinc = table.rows.length;
               var bc = document.getElementById("plosur").value;
               var compstate = document.getElementById("cmpstate").value;
               
               roinc++;
      $('#items-table-body').append(


        `
        <tr id='addr0${roinc}'>
          <td class = 'nnum'>${roinc}<input type="text"  name='id[]' value= 0 hidden></td>
                    <td style="width: 20%;">
                      <div class="d-flex">
                      <select name='item[]' id="item${roinc}" class="form-control item" style="background-color: #2f516f; color: white;">
                        <option value=" " selected>Select Item</option>
                        
                        {% for i in item %}
                                {% if i.cid_id == cmp1.cid %}
                                    <option 
                                            value="{{ i.name  }}">{{ i.name  }} </option>
                                {% endif %}
                            {% endfor %}
                              </select>

                            <a href="#">
                                <button type="button" class="btn btn-outline-secondary ml-1" 
                                data-target="#newitem" data-toggle="modal">+</button>
                            </a>
                        </div>
                    </td>
                    <td><input type="text" name='hsn[]' id="hsn${roinc}" placeholder='Enter HSN Code' class="form-control" style="background-color: #2f516f; color: white;" /></td>
                    <td><input type="number" name='qty[]' onchange="qtychange1(this)" placeholder='Enter Qty' id="qty${roinc}"  value=0 class="form-control qty" step=0 min=0  class="form-control qty" style="background-color: #2f516f; color: white;" />
                    </td>
                    <td><input type="number" name='price[]' id="unit${roinc}" placeholder='Enter Unit Price' class="form-control price" step="0.00" min="0" style="background-color: #2f516f; color: white;" /></td>
                    
                    <td>
                      <input type="text"  id="select_tax" placeholder="Tax Rate" class="form-control seltax d-flex">

                      <select name='tax1[]' id="tax1${roinc}" class="form-control tax intra_tax d-none">
                          <option selected disabled > Select GST</option>
                          <option value=28 >28.0% GST(28%)</option>
                          <option value=18 >18.0% GST(18%)</option>
                          <option value=12  >12.0% GST(12%)</option>
                              <option value=5  >05.0% GST(05%)</option>
                          <option value=3  >03.0% GST(03%)</option>
                              <option value=0  >0.0% GST(0%)</option>
                      </select>
                      <select name='tax2[]' id="tax2${roinc}" class="form-control tax inter_tax d-none">
                          <option selected disabled  >Select IGST</option>
                          <option value=28 >28.0% IGST(28%)</option>
                          <option value=18 >18.0% IGST(18%)</option>
                          <option value=12  >12.0% IGST(12%)</option>
                              <option value=5  >05.0% IGST(05%)</option>
                          <option value=3  >03.0% IGST(03%)</option>
                              <option value=0  >0.0% IGST(0%)</option>
                      </select>
                      
                    </td>  
                    <td>
                        <input type="number" name='discount[]' placeholder='Enter Discount' value=0 id="disc${roinc}" class="form-control disc" style="background-color: #2f516f; color: white;" step=0 min=0>
                    </td>
                    <td><input type="number" name='total[]' id="total${roinc}" placeholder=0 class="form-control total" value=0 step="any" readonly style="background-color: #2f516f; color: white;" /></td>
                    <td style="display: none;"><input type="number" step="any" name='taxamount1' id="taxamount${roinc}" class="form-control taxamount" />
                    </td>
                    <td>
                    <button type="button" id="${roinc}" class="btn  clone_row btn-outline-secondary ml-1 px-2 py-1 mx-1" style="width: 40px;" title="Clone Row">+</button><br>
                    <button type="button" id="${roinc}" class="btn  remove_row btn-outline-secondary ml-1 px-2 py-1 mx-1 mt-1"  style="width: 40px;"title="Remove Row">-</button>
                    </td>
            </tr>
  
  `
    
 
 );

            });
            
        });
           
        
          
            $(document).on('click','.remove_row',function(){
                var row_id = $(this).attr("id");
                $('#addr0'+row_id+'').remove();
            });     
    
            $(document).on("click","#itemSave",function(){
            var taxref,status1;
 
            if ($('#inclusive').checked) {
                tax= $('#inclusive').val();
             } 
             else if($('#check').val()){
                tax = $('#check').val();
             }
             else 
            {
             console.log("Checkbox is not checked.");
            }

            console.log(tax);
            if ($('input[name="status"]:checked').val() == 'Active'){

                status1 = $('#flexRadioDefault1').val();
            }
            else{
                status1 = $('#flexRadioDefault2').val();
            }

            $.ajax({
            
            type : 'POST',
            url:"{% url 'createitem_rbill' %}",
            
            data:{
                type : $("#type").val(),
                name : $("#item_name").val(),
                unit : $("#unit").val(),
                hsn : $("#hsn").val(),
                taxref : tax,
                salesprice : $("#saleprice").val(),
                pcost: $("#purprice").val(),
                sale_account : $("#sale_account").val(),
                pur_account : $("#pur_account").val(),
                sale_desc : $("#sale_desc").val(),
                pur_desc : $("#pur_desc").val(),
                intra_st : $("#intra_st").val(),
                inter_st : $("#inter_st").val(),
                invacc : $("#invacc").val(),
                stock : $("#stock").val(),
                stock_rate : $("#stock_rate").val(),
                // itmdate : $("#date3").val(),
                status : status1,
                csrfmiddlewaretoken: '{{ csrf_token }}',
                
                },
            
                success: function(response) {
                    console.log(response)
                    document.getElementById("modalItem").reset();
                    reloadItem();
                    // reloadItem2()
                },
            });        
            });


        function reloadItem() {
            $.ajax({
            url: "{% url 'item_dropdown_rbill' %}",
            type: "GET",
            dataType: "json",
            data: $(this).serialize(),
            csrfmiddlewaretoken: '{{ csrf_token }}',

            success: function(data) {
                var dropdown = $('.item');
                console.log(data)
                dropdown.empty();
                dropdown.append(`<option selected>Select Item</option>`);
                $.each(data, function(key, value) {
                
                    dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
                });

            },
            error: function(xhr, status, error) {
            console.error(xhr.responseText);
            }
            });
            }
            // function reloadItem2() {
            // $.ajax({
            // url: "{% url 'item_dropdown_rbill' %}",
            // type: "GET",
            // dataType: "json",
            // data: $(this).serialize(),
            // csrfmiddlewaretoken: '{{ csrf_token }}',

            // success: function(data) {
            //     var dropdown = $('#item');
            //     console.log(data)
            //     dropdown.empty();
            //     dropdown.append(`<option selected>Select Item</option>`);
            //     $.each(data, function(key, value) {
                
            //         dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
            //     });

            // },
            // error: function(xhr, status, error) {
            // console.error(xhr.responseText);
            // }
            // });
            // }

   // calculation---------------------------

   $(document).on('change', '.item',function(){ 
                
                var n = $(this).attr("id").slice(4);
                console.log('item changed')
                console.log(n)
                $.ajax({
                url: "{% url 'itemdata_rbill' %}",
                type : 'GET',
                data:{
                    id : $(this).val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                
                success: function(response) {
                    data = response.hsn
                    // data2 = response.qty
                    data3 = response.price
                    data4 = response.gst
                    data5 = response.sgst
                    console.log('HSN:', data);
                    console.log('Price:', data3);
                  
                    
                    document.getElementById('hsn'+n).value = data;
                    // document.getElementById('qtyspan'+n).innerHTML = data2;
                    document.getElementById('unit'+n).value = data3;

                },
                });
                

            });
           
           

            $(document).on('click','.remove_row',function(){
                var row_id = $(this).attr("id");
                $('#addr0'+row_id+'').remove();
                
                calc();
            });

            $(document).on('click','.clone_row',function(){
                var roinc = $("#items-table-body tr").length;
                var originalRow = $(this).closest('#items-table-body tr'); 
                var clonedRow = originalRow.clone();

                // var newId = parseInt(clonedRow.attr('id').replace('addr0', ''))+1;
                clonedRow.attr('id', 'addr0' +(roinc+1));

                clonedRow.find('.nnum').text(roinc+1);

                var hiddenInput = originalRow.find('input[name="id[]"]').clone();
                hiddenInput.val(0);
                clonedRow.find('.nnum').append(hiddenInput);

                clonedRow.find('[id]').each(function() {
                    var oldId = $(this).attr('id');
                    var newId = oldId.replace(/\d+/, roinc+1);
                    console.log(newId)
                    $(this).attr('id', newId );
                });

                clonedRow.find('.item').each(function() {
                    $(this).val(originalRow.find('.item').val());
                });
                clonedRow.find('.intra_tax').each(function() {
                    $(this).val(originalRow.find('.intra_tax').val());
                });
                clonedRow.find('.inter_tax').each(function() {
                    $(this).val(originalRow.find('.inter_tax').val());
                });
                originalRow.after(clonedRow);
                
                calc();
                
            });
            $('#items-table-body').on('keyup change', function () {
                calc();
            });

            $('#tax').on('keyup change', function () {
                calc_total();
            });
         

        function calc() {
            $('#tab_logic tbody tr').each(function () {
                var html = $(this).html();
                if (html != '') {
                    var qty = $(this).find('.qty').val();
                    
                    var price = $(this).find('.price').val();

                    var dis = $(this).find('.disc').val();
                    console.log(qty)
                    console.log(typeof(qty))
                    
                    console.log(price)
                    console.log(typeof(price))
                    console.log(parseFloat(dis))
                    console.log(typeof(parseFloat(dis)))
                    var bc = $("#plosur").val();
                    var compstate = $("#cmpstate").val();
                    if(bc==compstate){
                        tax = $(this).find('.intra_tax').val();
                    }
                    else{
                        tax = $(this).find('.inter_tax').val();
                    }
                    console.log((parseFloat(qty) *parseFloat(price))-parseFloat(dis))
                    $(this).find('.total').val((parseFloat(qty) *parseFloat(price))-parseFloat(dis));
                    $(this).find('.taxamount').val(((qty * price)-dis) * (tax / 100));
                    calc_total();
                }
            });
        }

        function calc_total() {
             
            total = 0;
            $('.total').each(function () {
                total += parseFloat($(this).val());
            });
            taxamount = 0;
            $('.taxamount').each(function () {
                taxamount += parseFloat($(this).val());
            });
            $('#sub_total').val(total.toFixed(2));
            $('#tax_amount').val(taxamount.toFixed(2));
            ship = parseFloat($("#ship").val());
            // console.log( ship);
            gtot = taxamount + total + ship;
            $('#grandtotal').val(gtot.toFixed(2));
            $('#baldue').val(gtot.toFixed(2));

            test()
            calculateBalanceDue();
        }

        function test(){
                     
            var bc = $("#plosur").val();
            var compstate = $("#plosu").val();
            d=0
            if (bc == compstate  ) {
                gst = taxamount/2
                $('#cgst').val(parseFloat(gst.toFixed(2)));
                $('#sgst').val(parseFloat(gst.toFixed(2)));
                $('#igst').val(parseFloat(d.toFixed(2)));
            }
                
            if (bc != compstate  ) {
                $('#igst').val(taxamount.toFixed(2));
                $('#cgst').val(d.toFixed(2));
                $('#sgst').val(d.toFixed(2));
            }

           
        }
        $(document).on('keyup',"#ship",function(){
            var subtot = $('#sub_total').val();
            var tax = $('#tax_amount').val();
            var sh = $("#ship").val();
            $('#grandtotal').val((parseFloat(subtot)+parseFloat(tax)+parseFloat(sh)).toFixed(2));
            $('#baldue').val((parseFloat(subtot)+parseFloat(tax)+parseFloat(sh)).toFixed(2));
            calculateBalanceDue();
        });

        // $(document).on("change", "#adj", function(){
        //     var round = parseFloat($("#grandtotal").val()) + parseFloat($("#adj").val()) 
        //     $("#grandtotal").val(round);
        //     $('#baldue').val(round);
        // });
        $(document).on('keyup',"#adj",function(){
            var subtot = $('#sub_total').val();
            var tax = $('#tax_amount').val();
            var sh = $("#ship").val();
            var ad=$("#adj").val();
            $('#grandtotal').val((parseFloat(subtot)+parseFloat(tax)+parseFloat(sh)+parseFloat(ad)).toFixed(2));
            $('#baldue').val((parseFloat(subtot)+parseFloat(tax)+parseFloat(sh)+parseFloat(ad)).toFixed(2));
            calculateBalanceDue();
        });

        $(document).on("click",".seltax",function(){
                
                $(".seltax").removeClass('d-flex');
                $(".seltax").addClass('d-none');

                console.log($("#plosur").val());
                console.log($("#plosu").val());

                if($("#plosur").val() == $("#plosu").val()){
                    console.log("yes");
                    $(".inter_tax").removeClass('d-flex');
                    $(".inter_tax").addClass('d-none');

                    $(".intra_tax").removeClass('d-none');
                    $(".intra_tax").addClass('d-flex');
                    
                }
                else{
                    console.log("no");
                    $(".intra_tax").removeClass('d-flex');
                    $(".intra_tax").addClass('d-none');

                    $(".inter_tax").removeClass('d-none');
                    $(".inter_tax").addClass('d-flex');
                }

            });
            $(document).on('change', '#plosur', function () {
    $(".seltax").removeClass('d-none');
    $(".seltax").addClass('d-flex');
    $(".intra_tax").removeClass('d-flex');
    $(".intra_tax").addClass('d-none');
    $(".inter_tax").removeClass('d-flex');
    $(".inter_tax").addClass('d-none');
    var bc = document.getElementById("plosur").value;
    var compstate = document.getElementById("plosu").value;
    if (bc == compstate) {
        document.getElementById('cgst1').style.display = 'flex';
        document.getElementById('sgst1').style.display = 'flex';
        document.getElementById('igst1').style.display = 'none';
    } else {
        document.getElementById('cgst1').style.display = 'none';
        document.getElementById('sgst1').style.display = 'none';
        document.getElementById('igst1').style.display = 'flex'; // Updated this line
    }
});

$(document).on('change', '#plosu', function () {
    $(".seltax").removeClass('d-none');
    $(".seltax").addClass('d-flex');
    $(".intra_tax").removeClass('d-flex');
    $(".intra_tax").addClass('d-none');
    $(".inter_tax").removeClass('d-flex');
    $(".inter_tax").addClass('d-none');
    var bc = document.getElementById("plosur").value;
    var compstate = document.getElementById("plosu").value;
    if (bc == compstate) {
        document.getElementById('cgst1').style.display = 'flex';
        document.getElementById('sgst1').style.display = 'flex';
        document.getElementById('igst1').style.display = 'none';
    } else {
        document.getElementById('cgst1').style.display = 'none';
        document.getElementById('sgst1').style.display = 'none';
        document.getElementById('igst1').style.display = 'flex'; // Updated this line
    }
});


    </script>

   
<script type="text/javascript">
    function ShowHideDivi(inclusive) {
        var inter = document.getElementById("intrastateFiled");

        inter.style.display = inclusive.checked ? "block" : "none";

    }
    function ShowHideDiv(track) {
                var inventorytrack = document.getElementById("inventorytrack");
    
                inventorytrack.style.display = track.checked ? "flex" : "none";
    
            }
</script>

   
    
{% endblock %}